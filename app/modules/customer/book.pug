doctype html
html(lang='en')
  head
    meta(charset='utf-8')
    link(rel='apple-touch-icon', sizes='76x76', href='../paperDashboardPro/img/apple-icon.png')
    link(rel='icon', type='image/png', sizes='96x96', href='../paperDashboardPro/img/favicon.png')
    meta(http-equiv='X-UA-Compatible', content='IE=edge,chrome=1')
    title Online Booking and Spa Management System
    // Canonical SEO
    link(rel='canonical', href='http://www.creative-tim.com/product/paper-dashboard-pro')
    meta(content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0', name='viewport')
    meta(name='viewport', content='width=device-width')
    // Social tags
    meta(name='keywords', content='creative tim, html dashboard, html css dashboard, web dashboard, bootstrap dashboard, bootstrap, css3 dashboard, bootstrap admin, paper bootstrap dashboard, frontend, responsive bootstrap dashboard')
    meta(name='description', content='Paper Dashboard PRO is a beautiful Bootstrap admin dashboard with a large number of components, designed to look neat and organised. ')
    // Schema.org markup for Google+
    meta(itemprop='name', content='Paper Dashboard PRO by Creative Tim')
    meta(itemprop='description', content='Paper Dashboard PRO is a beautiful Bootstrap admin dashboard with a large number of components, designed to look neat and organised. If you are looking for a tool to manage and visualise data about your business, this dashboard is the thing for you.')
    meta(itemprop='image', content='http://s3.amazonaws.com/creativetim_bucket/products/47/original/opt_pdp_thumbnail.jpg')
    // Twitter Card data
    meta(name='twitter:card', content='summary_large_image')
    meta(name='twitter:site', content='@creativetim')
    meta(name='twitter:title', content='Paper Dashboard PRO by Creative Tim')
    meta(name='twitter:description', content='Paper Dashboard PRO is a beautiful Bootstrap admin dashboard with a large number of components, designed to look neat and organised.')
    meta(name='twitter:creator', content='@creativetim')
    meta(name='twitter:image', content='http://s3.amazonaws.com/creativetim_bucket/products/47/original/opt_pdp_thumbnail.jpg')
    // Open Graph data
    meta(property='og:title', content='Paper Dashboard PRO by Creative Tim')
    meta(property='og:type', content='article')
    meta(property='og:url', content='http://demos.creative-tim.com/paper-dashboard-pro/examples/dashboard/overview.html')
    meta(property='og:image', content='http://s3.amazonaws.com/creativetim_bucket/products/47/original/opt_pdp_thumbnail.jpg')
    meta(property='og:description', content='Paper Dashboard PRO is a beautiful Bootstrap admin dashboard with a large number of components, designed to look neat and organised.')
    meta(property='og:site_name', content='Creative Tim')
    // Bootstrap core CSS
    link(href='/assets/paperDashboardPro/css/bootstrap.min.css', rel='stylesheet')
    // Paper Dashboard core CSS
    link(href='/assets/paperDashboardPro/css/paper-dashboard.css', rel='stylesheet')
    // CSS for Demo Purpose, don't include it in your project
    link(href='/assets/paperDashboardPro/css/demo.css', rel='stylesheet')
    link(href='/assets/paperDashboardPro/css/fullcalendar.css', rel='stylesheet')
    link(href='/assets/paperDashboardPro/css/scheduler.css', rel='stylesheet')
    // Fonts and icons
    link(href='http://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css', rel='stylesheet')
    link(href='https://fonts.googleapis.com/css?family=Muli:400,300', rel='stylesheet', type='text/css')
    link(href='/assets/paperDashboardPro/css/themify-icons.css', rel='stylesheet')
  body.sidebar-mini
    nav.navbar.navbar-transparent.navbar-absolute
      .container
        .navbar-header
          button.navbar-toggle(type='button', data-toggle='collapse', data-target='#navigation-example-2')
            span.sr-only Toggle navigation
            span.icon-bar
            span.icon-bar
            span.icon-bar
        .collapse.navbar-collapse
          ul.nav.navbar-nav.navbar-left
            li
              a.h5(data-toggle="modal" data-target="#Home" style="color: white") Online Reservation and Spa Management System
          ul.nav.navbar-nav.navbar-right
            li
              h5(style="color: white") Current Date: 
                a(style="color: white")#date-part
                  p
                    a(style="color: white")#time-part
                
    .wrapper.wrapper-full-page
      each customer in customers
        if(customer.cust_gender=='Male')
          .full-page.login-page(data-color='black', style=("background-image: url('/assets/paperDashboardPro/img/bluespa.jpg'); background-size: cover; background-repeat: no-repeat"))        
            .content
              .col-lg-12.col-md-12
                .card(style='height: 75em')
                  .card-header
                    each customer in customers
                      input.restype(type="hidden" id="restype" value=`${restype}`)
                      h4
                        strong#name= "Name: "+ customer.cust_fname+" "+customer.cust_mname+" "+customer.cust_lname
                        input(type="hidden" value=`${customer.cust_id}` id='customerId')
                        input.cust_typeHidden(type='' value=`${customer.cust_type}`)
                        -if(customer.vat_exempt_id == null)
                          input.vat_exempt_custHidden(type='' value="0")
                        
                        -else if(customer.vat_exempt_id != null)
                          input.vat_exempt_custHidden(type='' value='1')
                        
                        br
                        strong#gender= "Gender: "+ customer.cust_gender
                        br
                        if(restype=='single')
                          strong= "Medical History: "+customer.medical_history
                        else
                        
                      h4
                        strong Selected Room: 
                          a#room #{room}
                        input(type='' value=`${roomId}` id="roomId")
                        input(type='' vale=`` id='room_gender')
                        br
                        strong Room Fee: 
                          a#roomRate
                          input(type='' value='' id='rateNgRoom')
                        br
                        strong Reservation Date: 
                          a#date 
                        input(type="hidden" value='' id='dateRes')
                        br
                        strong Reservation Time: 
                          a#time #{time}
                        input(type="hidden" value=`${time}`)
                        br
                        strong End Time: 
                          a(id='totalDuration') 0  
                    br
                    input(type='' value=`${total_male}` id='male')
                    br
                    input.female(type='' value=`${total_female}` id='female')
                    input.total_res(type='' value=`${total_res}`)
                    input.total_quant(type='' value='0' id='total_quant')
                    input(type='' value=`${roomId}` id='roomId')              


                  .card-content
                    .nav-tabs-navigation
                      .nav-tabs-wrapper
                        ul#tabs.nav.nav-tabs(data-tabs='tabs')
                          li.active
                            a(href='#single', data-toggle='tab') Services
                          li
                            a(href='#packages', data-toggle='tab') Package
                          li
                            a(href='#promo', data-toggle='tab') Promo
                    #my-tab-content.tab-content
                      
                      //- SERVICES
                      #single.tab-pane.active
                        .content
                          .container-fluid
                            .row
                              .col-md-12
                                .card
                                  .card-content
                                    .toolbar
                                      // Here you can write extra buttons/actions for the toolbar
                                    .fresh-datatables
                                      table#datatables.table.table-no-bordered.table-hover(cellspacing='0', width='100%', style='width:100%')
                                        thead
                                          tr
                                            th
                                            th
                                              strong  Services 
                                            th
                                              strong  Duration
                                            th
                                              strong Price
                                            th
                                              strong Quantity
                                            th
                                              strong Points
                                            th
                                              strong Total
                                            //- th.text-center.disable-sorting(data-field='therapist', style='margin-right: 50px')
                                            //-   strong Therapist
                                        tbody
                                          each service in services
                                            tr
                                              td
                                                input.checkbox(type='checkbox' value=`${service.service_id}`)
                                                input.typeServ(type='' value ='service' id=`${service.service_id}`)
                                                
                                              td= service.service_name
                                                input.name(type='' id= `${service.service_id}` value=`${service.service_name}`)
                                                input.id(type='' id= `${service.service_id}` value=`${service.service_id}`)
                                              td= service.service_duration_desc+" minutes"
                                                input.duration(type='' value=`${service.service_duration_desc}` id=`${service.service_id}`)
                                                input.bagongDuration(type='' value="" id=`${service.service_id}`)
                                              td
                                                input.price(type="hidden" id=`${service.service_id}` value=`${service.service_price}`)
                                                span= '₱'+service.service_price
                                              td
                                                span.quantity(service_id=`${service.service_id}`) 0
                                                input.quantityInput(type='' service_id=`${service.service_id}` value="")
                                              
                                              input.points(type='' id=`${service.service_id}` value=`${service.service_points}`)
                                              input.eqPoints(type='' id=`${service.service_id}` value=`${service.service_equivalentPoints}`)
                                              td= service.service_points
                                              td
                                                input.hiddenTotal(type='' value='0' id=`${service.service_id}`)
                                                span.total(service_id=`${service.service_id}`) ₱0

                      //- [PACKAGES]
                      #packages.tab-pane
                        .content
                          .container-fluid
                            .row
                              .col-md-12
                                .card
                                  .card-content
                                    .toolbar
                                      // Here you can write extra buttons/actions for the toolbar
                                    .fresh-datatables
                                      table#datatablesPackage.table.table-no-bordered.table-hover(cellspacing='0', width='100%', style='width:100%')
                                        thead
                                          tr
                                            th
                                            th
                                              strong  Packages 
                                            th
                                              strong  Duration
                                            th
                                              strong Price
                                            th
                                              strong Quantity
                                            th
                                              strong Points
                                            th
                                              strong Total
                                            //- th.text-center.disable-sorting(data-field='therapist', style='margin-right: 50px')
                                            //-   strong Therapist
                                        tbody
                                          each pack in packages
                                            tr
                                              td
                                                input.checkbox(type='checkbox' value=`${pack.package_id}`)
                                                input.typeServ(type='' value ='package' id=`${pack.package_id}`)
                                                
                                              td= pack.package_name
                                                input.name(type='' id= `${pack.package_id}` value=`${pack.package_name}`)
                                                input.id(type='' id= `${pack.package_id}` value=`${pack.package_id}`)
                                              td= pack.package_duration+" minutes"
                                                input.duration(type='' value=`${pack.package_duration}` id=`${pack.package_id}`)
                                                input.bagongDuration(type='' value="" id=`${pack.package_id}`)
                                              td
                                                input.price(type="hidden" id=`${pack.package_id}` value=`${pack.package_price}`)
                                                span= '₱'+pack.package_price
                                              td
                                                span.quantity(service_id=`${pack.package_id}`) 0
                                              
                                              input.points(type='' id=`${pack.package_id}` value=`${pack.package_points}`)
                                              input.eqPoints(type='' id=`${pack.package_id}` value=`${pack.package_equivalentPoints}`)
                                              if(pack.package_points==1|| pack.package_points==0)
                                                td= pack.package_points+" "+"Point"
                                              else if(pack.package_points > 0)
                                                td= pack.package_points+" "+"Points"
                                              td
                                                input.hiddenTotal(type='' value='0' id=`${pack.package_id}`)
                                                span.total(service_id=`${pack.package_id}`) ₱0
                      
                      //- [PROMO]
                      #promo.tab-pane
                        .content
                          .container-fluid
                            .row
                              .col-md-12
                                .card
                                  .card-content
                                    .toolbar
                                      // Here you can write extra buttons/actions for the toolbar
                                    .fresh-datatables
                                      table#datatablesPromo.table.table-no-bordered.table-hover(cellspacing='0', width='100%', style='width:100%')
                                        thead
                                          tr
                                            th
                                            th
                                              strong  Promos 
                                            th
                                              strong  Duration
                                            th
                                              strong Price
                                            th
                                              strong Quantity
                                            th
                                              strong Points
                                            th
                                              strong Total
                                            //- th.text-center.disable-sorting(data-field='therapist', style='margin-right: 50px')
                                            //-   strong Therapist
                                        tbody
                                          each promo in promos
                                            tr
                                              td
                                                input.checkbox(type='checkbox' value=`${promo.promobundle_id}`)
                                                input.typeServ(type='' value ='promo' id=`${promo.promobundle_id}`)
                                                
                                              td= promo.promobundle_name
                                                input.name(type='' id= `${promo.promobundle_id}` value=`${promo.promobundle_name}`)
                                                input.id(type='' id= `${promo.promobundle_id}` value=`${promo.promobundle_id}`)
                                              td= promo.promobundle_duration+" minutes"
                                                input.duration(type='' value=`${promo.promobundle_duration}` id=`${promo.promobundle_id}`)
                                                input.bagongDuration(type='' value="" id=`${promo.promobundle_id}`)
                                              td
                                                input.price(type="hidden" id=`${promo.promobundle_id}` value=`${promo.promobundle_price}`)
                                                span= '₱'+promo.promobundle_price
                                              td
                                                span.quantity(service_id=`${promo.promobundle_id}`) 0
                                              
                                              input.points(type='' id=`${promo.promobundle_id}` value=`${promo.promobundle_points}`)
                                              input.eqPoints(type='' id=`${promo.promobundle_id}` value=`${promo.equivalent_points}`)
                                              if(promo.promobundle_points==1|| promo.promobundle_points==0)
                                                td= promo.promobundle_points+" "+"Point"
                                              else if(promo.promobundle_points > 0)
                                                td= promo.promobundle_points+" "+"Points"
                                              td
                                                input.hiddenTotal(type='' value='0' id=`${promo.promobundle_id}`)
                                                span.total(service_id=`${promo.promobundle_id}`) ₱0
                                            input(type='' value=`${roomId}` id="roomId")
                    h4
                      //- strong Original Price
                      //-   a.originalPrice(style="display:none") 
                      //- br
                      strong Total Price:  
                        a(id="grandtotal")  ₱0 
                        input.hiddenGrandTotal(type='' value='')
                        input.originalTotal(type='' value='')
                      br
                      strong Total Points: 
                        a(id="grandtotalPoints") 0
                  
                    button.btn.btn-secondary.pull-left.btn.btn-danger.btn-fill.btn-wd(type='button', data-dismiss='modal') Cancel
                    button.btn.btn-secondary.pull-right.btn.btn-info.btn-fill.btn-wd.buttonSummary(type='button') Reserve
            #reservationSummary.modal.fade(tabindex='-1', role='dialog')
              .modal-dialog.modal-lg(role='document')
                .modal-content
                  .modal-header
                    h3.modal-title
                      center Reservation Summary
                    button.close(type='button', data-dismiss='modal', aria-label='Close')
                  .modal-body
                    .col-lg-12.col-md-12
                        h5
                          strong#Name= "Name: "
                          br
                          strong#Gender= "Gender: "
                          br
                          strong#Room= `Room:` 
                          br
                          strong Room Fee: 
                            strong#RateOfRoom
                            input.RateOfRoom(type='' value='')
                          br
                          strong#Date= `Date:`
                          br
                          strong#ReservationTime
                          input(type="hidden" value='' id="timeStart")
                          input(type="hidden" value='' id="timeEnd") 
                        .row
                          .form-group
                            .col-md-3
                              h5.category
                                strong Therapist
                            .col-md-3(style="margin-left: 34%")
                              h5.category
                                //- strong Locker No.
                        .row
                          .col-md-10(style="width: 30%;")
                            if(restype=='single')
                                select.selectpicker(title='Select Therapist', data-style='btn-info', data-size='7' name='selected_therapist' id='selected_therapist' required='true' aria-label='true' )
                                  each thera in therapist
                                    if(thera.in_service == null || thera.in_service == 0)
                                      option(value=`${thera.therapist_id}`)= thera.therapist_fname+" "+thera.therapist_mname+" "+thera.therapist_lname
                                    else if(thera.in_service == 1)
                                      option(value=`${thera.therapist_id}` disabled style="background-color: #c5c5c5")= thera.therapist_fname+" "+thera.therapist_mname+" "+thera.therapist_lname+" - NOT AVAILABLE"
                            else if(restype=='multiple')
                                select.selectpicker(multiple='', title='Select Therapist', data-style='btn-info', data-size='7' name='selected_therapist' id='selected_therapist' required='true' aria-label='true')
                                  each thera in therapist
                                    option(value=`${thera.therapist_id}`)= thera.therapist_fname+" "+thera.therapist_mname+" "+thera.therapist_lname
                          //- .col-md-9(style="width: 30%;margin-left: 27%;")
                          //-   select.selectpicker(multiple='' title='Select Locker', data-style='btn-info', data-size='7' name='locker_num' id='locker_num' required='true' aria-label='true' )
                          //-     - for(var i=0;i<reqSession.utilities[0].locker_quantity;i++)
                          //-         if(i == 0)
                          //-             option(value=i+1) Locker no. #{i+1} 
                          //-         else
                          //-           option(value=i+1) Locker no. #{i+1} 
                    
                    .row
                        .col-md-12
                          .card-content
                            .toolbar
                            .fresh-datatables
                            table#datatablesSummary.table.table-no-bordered.table-hover(cellspacing='0', width='100%', style='width:100%')
                              thead
                                tr
                                  th
                                    strong  Services 
                                  th
                                    strong  Quantity
                                  th
                                    strong Duration
                                  th
                                    strong Total Price 
                              tbody#viewServices
                    .row
                      .col-md-7
                      .col-md-4
                        h4 Total Price: 
                            a#finalTotal
                            input.earlyHiddenTotal(type='' value='')
                            br
                            | Total  Points: 
                            a#finalPoints
                            input.earlyHiddenPoints(type='' value='')
                                
                  .modal-footer
                    button.btn.btn-secondary.pull-right.btn.btn-info.btn-fill.btn-wd.submitButton(type='button') Book
                    button.btn.btn-secondary.pull-left.btn.btn-danger.btn-fill.btn-wd(type='button', data-dismiss='modal') Cancel

                // PAYNOW 
                #checkout.modal.fade(role='dialog' aria-labelledby='myModalLabel' style='overflow: auto')
                  .modal-dialog.modal-lg(role='document')
                    .modal-content
                      .modal-header
                        h5.modal-title
                          center Summary
                        button.close(type='button', data-dismiss='modal', aria-label='Close')
                      .modal-body
                        div
                          h5
                            strong#custName
                            br
                            button.hello(type='' value='') Register for Loyalty Membership
                            input.paid_stats(type='' value='')
                            div.appendHere
                          h5
                            strong#RoomAvailed
                            br
                            strong#RoomRateAvailed
                            br
                            strong#DateReserv
                            br
                            strong#TimeReserv
                            hr
                        .fresh-datatables
                          table#datatablesPaynow.table.table-no-bordered.table-hover(cellspacing='0', width='100%', style='width:100%')
                            thead
                              tr
                                th.disabled-sorting
                                  strong Services Availed 
                                th.disabled-sorting Quantity
                                th.disabled-sorting Amount
                                th.disabled-sorting Equivalent Points
                                th
                            tfoot
                              tr
                                th.disabled-sorting
                                th
                                th
                                th
                                th
                            tbody#viewServicesAvailed
                        .col-md-7
                        .col-md-4
                          h3
                            strong#TotalPrice
                            input.totalPrice(type='' value='')
                            br
                            strong Balance: 
                              a#AmountNeeded
                            input.amountNeeded(type='' value='')
                          h5
                            strong#TotalPoints
                            input.totalAmountPoints(type='' value='')
                            input.totalAmountReceived(type='' value='')

                        
                        .row
                          .col-md-3#appendDito
                            input.newPoints(type='' value='')
                            input.currentPoints(type='' value='')
                          .col-md-3
                            .form-group.has-default.bmd-form-group
                              .row
                                .col-md-1
                                  input.checkboxGC(type='checkbox' id='checkbox_gc' value='')
                                .col-md-6(style="width: 69%;")
                                  .category#totalGCval 
                                .col-md-5(style="width: 69%;")
                                  label(for='checkbox_gc') Gift Certificate
                              select#id_label_multiple.js-example-basic-multiple.js-states.form-control.selectpickerGc(title='Select Gift Certificate', multiple data-style='btn-info', data-size='7' name='giftcert' data-id='giftcert' required='true' aria-label='true' disabled='false')
                                each gc in giftcerts
                                  option(value=`${gc.gc_id}` gc_value=`${gc.gc_value}`)= gc.gc_refCode+" "+gc.gc_name
                          
                              input.gcTotal(type='' value='0')
                          .col-md-3
                            .form-group.has-default.bmd-form-group
                              label Amount Received:
                              .input-group
                                span.input-group-addon ₱  
                                input.form-control.amountReceived(type='number', placeholder='₱0')
                                span.input-group-addon 
                          
                          .col-md-3
                            .form-group.has-default.bmd-form-group
                              label Change: 
                              .input-group
                                span.input-group-addon ₱  
                                input.form-control.change(type='number', placeholder='Change' value='0' disabled)
                                span.input-group-addon 
                        .modal-footer
                          button.btn.btn-secondary.pull-right.btn.btn-success.btn-fill.btn-wd.buttonDone(type='button') Done
                          button.btn.btn-secondary.pull-left.btn.btn-danger.btn-fill.btn-wd(type='button', data-dismiss='modal') Cancel
                //REGISTRATION
                #RegisterModal.modal.fade(tabindex='1', role='dialog' aria-labelledby='myModalLabel')
                  .modal-dialog(role='document')
                    .modal-content
                      .modal-header
                        h5.modal-title
                          center Registration
                        button.close(type='button', data-dismiss='modal', aria-label='Close')
                      .modal-body
                        .row
                          .col-md-4
                            .form-group
                              label.control-label Username
                              star *
                              .input-group
                                .input-group-addon
                                  i.fa.fa-user
                                input.form-control(type='text', name='username', id="username" placeholder='username')
                              .category#ValidUsername
                        .row
                          .col-md-4
                            .form-group
                              label.control-label Password
                              star *
                              .input-group
                                .input-group-addon
                                  i.fa.fa-key
                                input.form-control(type='password', name='password1', id="password1" placeholder='password')
                              .category#ValidLength
                          .col-md-4
                            .form-group
                              label.control-label Re-enter Password
                              star *
                              .input-group
                                .input-group-addon
                                  i.fa.fa-key
                                input.form-control(type='password', name='password2', id="password2" placeholder='confirm password')
                              .category#ValidPass
                        .row
                          .col-md-5
                              h4 Fee:
                                a#fee 
                      .modal-footer
                        button.btn.btn-secondary.btn.btn-info.btn-fill.btn-wd.pull-right.buttonRegister(type='button') Done
                        button.btn.btn-secondary.btn.btn-danger.btn-fill.btn-wd.pull-left.buttonClose(type='button') Close

                       
  // Core JS Files. Extra: TouchPunch for touch library inside jquery-ui.min.js
  script(src='/assets/paperDashboardPro/js/jquery-3.1.1.min.js', type='text/javascript')
  script(src='/assets/paperDashboardPro/js/jquery-ui.min.js', type='text/javascript')
  script(src='/assets/paperDashboardPro/js/perfect-scrollbar.min.js', type='text/javascript')
  script(src='/assets/paperDashboardPro/js/bootstrap.min.js', type='text/javascript')
  // Forms Validations Plugin
  script(src='/assets/paperDashboardPro/js/jquery.validate.min.js')
  // Promise Library for SweetAlert2 working on IE
  script(src='/assets/paperDashboardPro/js/es6-promise-auto.min.js')
  // Plugin for Date Time Picker and Full Calendar Plugin
  script(src='/assets/paperDashboardPro/js/moment.min.js')
  // Date Time Picker Plugin is included in this js file
  script(src='/assets/paperDashboardPro/js/bootstrap-datetimepicker.js')
  // Select Picker Plugin
  script(src='/assets/paperDashboardPro/js/bootstrap-selectpicker.js')
  // Switch and Tags Input Plugins
  script(src='/assets/paperDashboardPro/js/bootstrap-switch-tags.js')
  // Circle Percentage-chart
  script(src='/assets/paperDashboardPro/js/jquery.easypiechart.min.js')
  // Charts Plugin
  script(src='/assets/paperDashboardPro/js/chartist.min.js')
  // Notifications Plugin
  script(src='/assets/paperDashboardPro/js/bootstrap-notify.js')
  // Sweet Alert 2 plugin
  script(src='/assets/paperDashboardPro/js/sweetalert.js')
  // Vector Map plugin
  script(src='/assets/paperDashboardPro/js/jquery-jvectormap.js')
  // Wizard Plugin
  script(src='/assets/paperDashboardPro/js/jquery.bootstrap.wizard.min.js')
  // Bootstrap Table Plugin
  script(src='/assets/paperDashboardPro/js/bootstrap-table.js')
  // Plugin for DataTables.net
  script(src='/assets/paperDashboardPro/js/jquery.datatables.js')
  // Full Calendar Plugin
  script(src='/assets/paperDashboardPro/js/fullcalendar.js')
  script(src='/assets/paperDashboardPro/js/scheduler.js')
  // Paper Dashboard PRO Core javascript and methods for Demo purpose
  script(src='/assets/paperDashboardPro/js/paper-dashboard.js')
  // Sharrre Library
  script(src='/assets/paperDashboardPro/js/jquery.sharrre.js')
  // Paper Dashboard PRO DEMO methods, don't include it in your project!
  script(src='/assets/paperDashboardPro/js/demo.js')
  script.
    $(document).ready(function(){
        $(document).on('input','.swal-content__input', function() {
          this.value = this.value
            .replace(/[^\d]/g, '')             // numbers and decimals only
            //- .replace(/(\..*)\./g, '$1')         // decimal can't exist more than once
            //- .replace(/(\.[\d]{4})./g, '$1');    // not more than 4 digits after decimal
        });
    })
  script.
    $(document).ready(function(){
      var room_id = $('#roomId').val()
      var restype = !{JSON.stringify(reservetype)}

      if(restype == 'single'){
        $.post('/frontdesk/RoomId',{
          room_id
        }).done(function(data){
          //- console.log(data)
          var room_gender = data.out[0].room_gender
          $('#room_gender').val(room_gender)

          if(room_gender == 1) //MALE
          {
            $('#male').val('1')
          }
          else if(room_gender == 2)
          {
            $('#female').val('1')
          }
        })
        
      }

    })
  script.
    $(document).ready(function(){
      var datePicked = !{JSON.stringify(dateHello)}
      var restype = !{JSON.stringify(reservetype)}
      console.log(restype)

      var FormatedDate = moment(datePicked).format('MMMM DD, YYYY')

      $('#date').text(FormatedDate)
      $('#dateRes').val(datePicked)

    })
  script.
    function calculate(){
      var totalPrice = $('.totalPrice').val()
      var amountNeeded = $('.amountNeeded').val()
      var currentPoints = $('.currentPoints').val()
      var pointsTotal = 0;
      var priceTotal = 0;
      var newPrice
      var newPoints
      var newhalaga

      $(".checkboxPayment:checked").each(function(){
        var id = $(this).val()
        //- console.log($(`.newhalaga[id='${id}']`)[0].value)
        newhalaga = $(`.newhalaga[id='${id}']`).val()
        var newPointsEq = $(`.newPointsEq[id='${id}']`).val()

        if($('.gcTotal').val() != 0)
        {
          priceTotal = eval(newhalaga+"+"+priceTotal)
          newPrice = parseFloat(amountNeeded) - parseFloat(priceTotal)
          if(newPrice < parseFloat(0)){
            newPrice = parseFloat(0.00).toFixed(2)
          }
          pointsTotal = eval(newPointsEq+'+'+pointsTotal)
          newPoints = parseFloat(currentPoints) - parseFloat(pointsTotal)
          
        }
        else
        {
          priceTotal = eval(newhalaga+"+"+priceTotal)
          newPrice = parseFloat(totalPrice) - parseFloat(priceTotal)
          pointsTotal = eval(newPointsEq+'+'+pointsTotal)
          newPoints = parseFloat(currentPoints) - parseFloat(pointsTotal)
        }
      })
        $('.newPoints').val(newPoints)
        $('.amountNeeded').val(newPrice)
        $('#AmountNeeded').text('₱'+newPrice+'')

    }
  script.
    $(document).ready(function(){
      $(document).on('change.bootstrapSwitch','.checkboxPayment',function(e){
        var id = $(this).val()
        var quantity = $(`.quantityTotal[id='${id}']`).val()
        var name = $(`.servname[id='${id}']`).val()
        var price = $(`.halaga[id='${id}']`).val()
        var points = $(`.eqTotal[id='${id}']`).val()
        var scriptSession = !{JSON.stringify(reqSession)};
        var vat= scriptSession.utilities[0].vat
            vat = parseFloat(vat) / parseFloat(100)
        if(e.target.checked==true)
        {
          if(quantity ==1)
          {
            if($('.vat_exempt_custHidden').val() == 0){

              var pricePerServ = parseFloat(price) / parseFloat(quantity)
              var computed_price = parseFloat(quantity) * parseFloat(pricePerServ)
              $(`.newhalaga[id='${id}']`).val(computed_price)

              var pointsPerServ = parseFloat(points) / parseFloat(quantity)
              var computed_points = parseFloat(quantity) * parseFloat(pointsPerServ)
              $(`.newPointsEq[id='${id}']`).val(computed_points)
            }
            else if($('.vat_exempt_custHidden').val() == 1){
              var pricePerServ = parseFloat(price) / parseFloat(quantity)
              var computed_price = parseFloat(quantity) * parseFloat(pricePerServ)
              var new_vat = computed_price * vat
                  computed_price = computed_price - new_vat
              $(`.newhalaga[id='${id}']`).val(computed_price)

              var pointsPerServ = parseFloat(points) / parseFloat(quantity)
              var computed_points = parseFloat(quantity) * parseFloat(pointsPerServ)
              $(`.newPointsEq[id='${id}']`).val(computed_points)
            }
            setTimeout(calculate)
          }
          else if(parseFloat(quantity) > parseFloat(1))
          {
            swal({
              title: "How many "+name+" will pay using points?",
              content: {
              element: "input",
              attributes: {
                type: "number",
                max: quantity,
              },
            },
              buttons: ['Cancel','Confirm']
            }).then(function(value){
              if(value !=''){
              if(parseFloat(value) > parseFloat(quantity))
              {
                swal({
                  title: "ERROR",
                  text: "The inputed number is invalid please try again",
                  icon: 'error'
                }).then(function(){
                  e.target.checked=false
                })
              }
              else
              {
                if($('.vat_exempt_custHidden').val()==0){

                  var pricePerServ = parseFloat(price) / parseFloat(quantity)
                  var computed_price = parseFloat(value) * parseFloat(pricePerServ)
                  $(`.newhalaga[id='${id}']`).val(computed_price)

                  var pointsPerServ = parseFloat(points) / parseFloat(quantity)
                  var computed_points = parseFloat(value) * parseFloat(pointsPerServ)
                  $(`.newPointsEq[id='${id}']`).val(computed_points)
                }
                else if($('.vat_exempt_custHidden').val() ==1){
                  var pricePerServ = parseFloat(price) / parseFloat(quantity)
                  var computed_price = parseFloat(value) * parseFloat(pricePerServ)
                  var new_vat = computed_price * vat 
                      computed_price = computed_price - new_vat
                  $(`.newhalaga[id='${id}']`).val(computed_price)

                  var pointsPerServ = parseFloat(points) / parseFloat(quantity)
                  var computed_points = parseFloat(value) * parseFloat(pointsPerServ)
                  $(`.newPointsEq[id='${id}']`).val(computed_points)
                }
                setTimeout(calculate)
              }

              if(value=='' || value==null)
              {
                 e.target.checked=false
                $(`.newhalaga[id='${id}']`).val(0)
                $(`.newPointsEq[id='${id}']`).val(0)
              }
              }
              else {
                e.target.checked=false
              }
            })
          }
              //- setTimeout(calculate,3000)
        }
        else
        {
          if($('#checkbox_gc')[0].checked==true)
          {
            var id = $(this).val()
            var newPointsEq = $(`.newPointsEq[id='${id}']`).val()
            var newPoints = $('.newPoints').val()
            var newhalaga = $(`.newhalaga[id='${id}'`).val()
            var amountNeeded = $('.amountNeeded').val()
            var total = eval(amountNeeded+"+"+newhalaga)

            newhalaga -= parseFloat(newhalaga)
            $(`.newhalaga[id='${id}']`).val(newhalaga)
            $('.amountNeeded').val(total)
            $('#AmountNeeded').text('₱'+total+'')

            var pointsTotal = eval(newPoints+'+'+newPointsEq)
            $('.newPoints').val(pointsTotal)
            newPointsEq -= parseFloat(newPointsEq)
            $(`.newPointsEq[id='${id}']`).val(newPointsEq)
          }
          else
          {
            var id = $(this).val()
            var newPointsEq = $(`.newPointsEq[id='${id}']`).val()
            var newPoints = $('.newPoints').val()
            var newhalaga = $(`.newhalaga[id='${id}'`).val()
            var amountNeeded = $('.amountNeeded').val()
            var total = eval(amountNeeded+"+"+newhalaga)

            newhalaga -= parseFloat(newhalaga)
            $(`.newhalaga[id='${id}']`).val(newhalaga)
            $('.amountNeeded').val(total)
            $('#AmountNeeded').text('₱'+total+'')

            var pointsTotal = eval(newPoints+'+'+newPointsEq)
            $('.newPoints').val(pointsTotal)
            newPointsEq -= parseFloat(newPointsEq)
            $(`.newPointsEq[id='${id}']`).val(newPointsEq)

          }
        }
      })
    })


  //- POINTS CHECKBOX
  script.
    $(document).ready(function(){
      $(document).on('change.bootstrapSwitch','#checkboxPoints',function(e){
        var paid_stats = $('.paid_stats').val()
        var currentPoints = $('.currentPoints').val()
        var newhalagaArray = []

        if(e.target.checked==true)
        {
          if($('.amountNeeded').val()==0)
          {
            swal({
                title: 'Is the balance complete?',
                icon: 'info'
              }).then(function(){
                $('.amountReceived').val(' ')
                $('.change').val(0)
                $('#checkboxPoints').prop('checked',false)
              })
          }
          else if($('.amountReceived').val() >= $('.amountNeeded').val())
          {
            swal({
                title: 'Is the balance complete?',
                icon: 'info'
              }).then(function(){
                $('#checkboxPoints').prop('checked',false)
              })
          }
          else
          {

            if(currentPoints==0 && paid_stats==1)
            {
              swal({
                title: 'Cannot Use Points As Payment',
                text: 'Your Points is '+currentPoints,
                icon: 'error'
              }).then(function(confirm){
                if(confirm)
                {
                  $('#checkboxPoints').prop('checked',false)
                }
                else
                {
                }
              })
            }
            else if(currentPoints==0 && paid_stats == 0)
            {
              swal({
                title: 'Cannot Use Points As Payment',
                text: 'please pay the membership fee first',
                icon: 'error'
              }).then(function(confirm){
                if(confirm)
                {
                  $('#checkboxPoints').prop('checked',false)
                }
                else
                {
                  
                }
              })
            }
            else
            {
              $('.amountReceived').val(' ')
              $('.change').val(' ')
              $('.checkboxPayment').css('display','block')
            }

            if($('#checkbox_gc')[0].checked==true && $('.selectpickerGc > option:selected').length==0)
            {
              $('#checkbox_gc').prop('checked',false)
              $('.selectpickerGc').attr('disabled',true)
              $('.selectpickerGc').val(0);
              $('.selectpickerGc').selectpicker("refresh");
            }
          }

        }
        


        else if(e.target.checked==false)
        { 
          var checkPayment = $('.checkboxPayment:checked')
          var array = []
          var total =0 
          var amountNeeded = $('.amountNeeded').val()
            $('.checkboxPayment:checked').each(function(){
              var id = $(this).val()
              array.push({
                id:id,
                newhalaga:$(`.newhalaga[id='${id}']`).val()
                })
            })

            for(var i=0;i<array.length;i++)
            {
              total += parseFloat(array[i].newhalaga)
              $(`.newhalaga[id='${array[i].id}']`).val(0)
              $(`.newPointsEq[id='${array[i].id}']`).val(0)
            }
            total = parseFloat(amountNeeded)+parseFloat(total)
            $('.amountNeeded').val(total)
            $('#AmountNeeded').text('₱'+total+'')
          $('.checkboxPayment').prop('checked',false)
            $('.newPoints').val($('.currentPoints').val())
          $('.checkboxPayment').css('display','none')
        }

      })
    })


  script.
    $(document).ready(function(){
      $('.amountReceived').on('change paste keyup',function(){
        var totalPrice = $('.totalPrice').val()
        var gc_total = $('.totalGCval').val()
        var input = $('.amountReceived').val()
        var amountNeeded = $('.amountNeeded').val()
        
        var pointsChecked = $('.checkboxPayment:checked')
        var giftcertSelected = $('.selectpickerGc > option:selected')
        //- console.log('points naka check',pointsChecked.length)
        //- console.log(giftcertSelected.length)

        if($('.amountReceived').val()==0)
          {
            $('.change').val(0)
          }
        else
          {
            if($('.paid_stats').val()!=3)
            {

                if($('#checkbox_gc')[0].checked == false && $('#checkboxPoints')[0].checked == false) // CASH ONLY
                {
                    //- console.log('CASH ONLY')
                    var change = parseFloat(input) - parseFloat(totalPrice)
                    $('.change').val(change)
                }
                else if ($('#checkbox_gc')[0].checked == false && $('#checkboxPoints')[0].checked == true && pointsChecked.length !=0) // CASH AND POINTS
                {
                  
                  var change = parseFloat(input) - parseFloat(amountNeeded)
                  $('.change').val(change)
                }
                else if($('#checkbox_gc')[0].checked == false && $('#checkboxPoints')[0].checked == true && pointsChecked.length ==0)
                {
                  var change = parseFloat(input) - parseFloat(amountNeeded)
                  $('.change').val(change)
                  $('#checkboxPoints').prop('checked',false)
                }
                else if ($('#checkbox_gc')[0].checked == true && giftcertSelected.length !=0 && $('#checkboxPoints')[0].checked == false) // CASH AND GC
                {
                  
                  var change = parseFloat(input) - parseFloat(amountNeeded)
                  $('.change').val(change)
                }
                else if($('#checkbox_gc')[0].checked == true && giftcertSelected.length ==0 && $('#checkboxPoints')[0].checked == false)
                {
                  var change = parseFloat(input) - parseFloat(amountNeeded)
                  $('.change').val(change)
                  $('#checkbox_gc').prop('checked',false)
                }

        
                if($('#checkbox_gc')[0].checked == true  && giftcertSelected.length != 0 && $('#checkboxPoints')[0].checked == true && pointsChecked.length !=0) // CASH , GIFT CERT AND POINTS
                {
                  //- console.log('ALL')
                  var amountNeeded = $('.amountNeeded').val()
                  var change = parseFloat(input) - parseFloat(amountNeeded)
                  $('.change').val(change)
                }
                else if($('#checkbox_gc')[0].checked == true  && giftcertSelected.length != 0 && $('#checkboxPoints')[0].checked == true && pointsChecked.length ==0)
                {
                  var amountNeeded = $('.amountNeeded').val()
                  var change = parseFloat(input) - parseFloat(amountNeeded)
                  $('.change').val(change)
                  $('#checkboxPoints').prop('checked',false)
                }
                else if($('#checkbox_gc')[0].checked == true  && giftcertSelected.length == 0 && $('#checkboxPoints')[0].checked == true && pointsChecked.length !=0)
                {
                  var amountNeeded = $('.amountNeeded').val()
                  var change = parseFloat(input) - parseFloat(amountNeeded)
                  $('.change').val(change)
                  $('#checkbox_gc').prop('checked',false)
                }
                else if($('#checkbox_gc')[0].checked == true && giftcertSelected.length == 0 && $('#checkboxPoints')[0].checked == true && pointsChecked.length ==0)
                {
                  $('#checkbox_gc').prop('checked',false)
                  $('#checkboxPoints').prop('checked',false)
                }

                if(amountNeeded == '0')
                {
                  swal({
                    title: 'The balance is 0',
                    icon: 'info'
                  }).then(function(){
                    $('.amountReceived').val(' ')
                    $('.change').val(0)
                  })
                }
              }
              else
              {
                if($('#checkbox_gc')[0].checked == false ) // CASH ONLY
                {
                    //- console.log('CASH ONLY')
                    var change = parseFloat(input) - parseFloat(totalPrice)
                    $('.change').val(change)
                }
                else if ($('#checkbox_gc')[0].checked == true && giftcertSelected.length !=0 ) // CASH AND GC
                {
                  
                  var change = parseFloat(input) - parseFloat(amountNeeded)
                  $('.change').val(change)
                }
                else if($('#checkbox_gc')[0].checked == true && giftcertSelected.length ==0 )
                {
                  var change = parseFloat(input) - parseFloat(amountNeeded)
                  $('.change').val(change)
                  $('#checkbox_gc').prop('checked',false)
                }

        
                if($('#checkbox_gc')[0].checked == true  && giftcertSelected.length != 0 ) // CASH , GIFT CERT AND POINTS
                {
                  //- console.log('ALL')
                  var amountNeeded = $('.amountNeeded').val()
                  var change = parseFloat(input) - parseFloat(amountNeeded)
                  $('.change').val(change)

                }
                else if($('#checkbox_gc')[0].checked == true  && giftcertSelected.length == 0 )
                {
                  var amountNeeded = $('.amountNeeded').val()
                  var change = parseFloat(input) - parseFloat(amountNeeded)
                  $('.change').val(change)
                  $('#checkbox_gc').prop('checked',false)
                }
                else if($('#checkbox_gc')[0].checked == true && giftcertSelected.length == 0 )
                {
                  $('#checkbox_gc').prop('checked',false)

                }

                if(amountNeeded == '0')
                {
                  swal({
                    title: 'The balance is 0',
                    icon: 'info'
                  }).then(function(){
                    $('.amountReceived').val(' ')
                    $('.change').val(0)
                  })
                }
              }
            }
      })
    })

  //- GIFT CERTIFICATE CHECKBOX
  script.
      $(document).ready(function(){
        $(document).on('change.bootstrapSwitch','.checkboxGC',function(e){
          var amountNeeded = $('.amountNeeded').val()
          //- console.log($('.selectpickerGc').val())
          if(e.target.checked==true)
          {
            if($('.amountNeeded').val()==0)
            {
              swal({
                  title: 'The balance is 0',
                  icon: 'info'
                }).then(function(){
                  $('.selectpickerGc').attr('disabled',true)
                  $('.selectpickerGc').val(0);
                  $('.selectpickerGc').selectpicker("refresh");
                  $('.amountReceived').val(' ')
                  $('.change').val(0)
                  $('.checkboxGC').prop('checked',false)
                })
            }
            else if(parseFloat($('.amountReceived').val()) >= $('.amountNeeded').val())
            {
              swal({
                  title: 'The balance is 0',
                  icon: 'info'
                }).then(function(){
                  $('.selectpickerGc').attr('disabled',true)
                  $('.selectpickerGc').val(0);
                  $('.selectpickerGc').selectpicker("refresh");
                  $('.checkboxGC').prop('checked',false)
                })
            }
            else
            {
              $('.amountReceived').val(' ')
              $('.change').val(' ')
              $('.selectpickerGc').removeAttr('disabled')
              $('.selectpickerGc').selectpicker("refresh");


              $('.selectpickerGc').on('change',function(){

                  $('.amountReceived').val(' ')
                  $('.change').val(0)
                  var total_value =0
                  var selected = $('option:selected',this)
                  var giftcerts =[]
                  //- console.log(giftcerts)
                  selected.each(function(){
                      giftcerts.push({
                      gc_value: parseFloat(this.getAttribute('gc_value'))
                    })
                  })

                  if(selected.length==0)
                  {
                    if($('.paid_stats').val() !=3)
                    {
                      if($('#checkboxPoints')[0].checked==false)
                      {
                        $('.amountNeeded').val($('.totalPrice').val())
                        $('#AmountNeeded').text('₱'+$('.totalPrice').val())
                        $('.gcTotal').val(0)
                        $('#totalGCval').text(' ')
                      }

                      if($('#checkboxPoints')[0].checked==true && $('.checkboxPayment:checked').length==0)
                      {
                        $('.amountNeeded').val($('.totalPrice').val())
                        $('#AmountNeeded').text('₱'+$('.totalPrice').val())
                        $('.gcTotal').val(0)
                        $('#totalGCval').text(' ')
                      }
                      else if($('#checkboxPoints')[0].checked==true && $('.checkboxPayment:checked').length!=0)
                      {
                          var array = []
                          var totalPrice = $('.totalPrice').val()
                          var total =0
                          $('.checkboxPayment:checked').each(function(){
                            var id = $(this).val()
                            array.push({
                              id:id,
                              newhalaga:$(`.newhalaga[id='${id}']`).val()
                              })
                          })

                          for(var i=0;i<array.length;i++)
                          {
                            total += parseFloat(array[i].newhalaga)
                            var newtotal = parseFloat(totalPrice) - total
                          }
                          $('.amountNeeded').val(newtotal)
                          $('#AmountNeeded').text('₱'+newtotal)
                        $('.gcTotal').val(0)
                        $('#totalGCval').text(' ')

                      }
                    }
                    else
                    {
                      $('.amountNeeded').val($('.totalPrice').val())
                        $('#AmountNeeded').text('₱'+$('.totalPrice').val())
                        $('.gcTotal').val(0)
                        $('#totalGCval').text(' ')
                    }
                  }



                for(var i=0;i<giftcerts.length;i++)
                {

                  if($('.paid_stats').val() == 1 || $('.paid_stats').val() ==0 )
                  {
                    if($('#checkboxPoints')[0].checked == true)
                    {
                      total_value = total_value + giftcerts[i].gc_value
                      $('.gcTotal').val(total_value)
                      
                      var newTotal = amountNeeded - total_value
                      if(newTotal < 0 )
                      {
                        $('.amountNeeded').val(0)
                        $('#AmountNeeded').text('₱'+0)
                      }
                      else
                      {
                        $('.amountNeeded').val(newTotal)
                        $('#AmountNeeded').text('₱'+newTotal)

                      }
                      $('#totalGCval').text('Total: ₱'+total_value)
                      $('#TotalAmountReceived').text('₱'+total_value)
                      $('.totalGCval').val(total_value)
                      $('.totalAmountReceived').val(total_value)
                    }
                    else
                    {
                      total_value = total_value + giftcerts[i].gc_value
                      $('.gcTotal').val(total_value)
                      
                      var newTotal = amountNeeded - total_value
                      //- console.log(newTotal)
                      if(newTotal < 0 )
                      {
                        $('.amountNeeded').val(0)
                        $('#AmountNeeded').text('₱'+0)
                      }
                      else
                      {
                        $('#AmountNeeded').text('₱'+newTotal)
                        $('.amountNeeded').val(newTotal)
                      }
                      $('#totalGCval').text('Total: ₱'+total_value)
                      $('#TotalAmountReceived').text('₱'+total_value)
                      $('.totalGCval').val(total_value)
                      $('.totalAmountReceived').val(total_value)
                    }
                  }
                  else
                  {
                    total_value = total_value + giftcerts[i].gc_value
                      $('.gcTotal').val(total_value)
                      
                      var newTotal = amountNeeded - total_value
                      //- console.log(newTotal)
                      if(newTotal < 0 )
                      {
                        $('.amountNeeded').val(0)
                        $('#AmountNeeded').text('₱'+0)
                      }
                      else
                      {
                        $('#AmountNeeded').text('₱'+newTotal)
                        $('.amountNeeded').val(newTotal)
                      }
                      $('#totalGCval').text('Total: ₱'+total_value)
                      $('#TotalAmountReceived').text('₱'+total_value)
                      $('.totalGCval').val(total_value)
                      $('.totalAmountReceived').val(total_value)
                  } 
                }

              })

            }
          }

          else if(e.target.checked==false && $('.selectpickerGc').val().length !=0)
          {
            $('.selectpickerGc').attr('disabled',true)
            $('.selectpickerGc').val(null).trigger('change')
            //- console.log('aaa', $('.selectpickerGc').length)
            $('.selectpickerGc').selectpicker("refresh");
            $('#totalGCval').text(' ')
            if($('.paid_stats').val() !=3)
            {
              if($('#checkboxPoints')[0].checked == false ) // IF PAYMENT USING POINTS IS UNCHECK
              {
                var totalPrice = $('.totalPrice').val()
                var gc_total = $('.gcTotal').val()
                var total = parseFloat(gc_total) + parseFloat(amountNeeded)
                  console.log('GC_TOTAL', gc_total)
                  console.log('AMOUNT NEEDED', amountNeeded)
                  console.log('TOTAL', total)
                $('.amountNeeded').val(totalPrice)
                $('#AmountNeeded').text('₱'+totalPrice)
                $('.gcTotal').val(0)
              }

              if($('#checkboxPoints')[0].checked==true && $('.checkboxPayment:checked').length ==0)
              {
                console.log($('.checkPayment:checked').length)
                console.log('PERS IF')
                var totalPrice = $('.totalPrice').val()
                var gc_total = $('.gcTotal').val()
                var total = parseFloat(gc_total) + parseFloat(amountNeeded)
                $('.amountNeeded').val(totalPrice)
                $('#AmountNeeded').text('₱'+totalPrice)
                $('.gcTotal').val(0)
              }
              else if($('#checkboxPoints')[0].checked==true && $('.checkboxPayment:checked').length !=0)
              {
                console.log('PASOK DITO')
                    var array = []
                    var totalPrice = $('.totalPrice').val()
                    var total =0
                    $('.checkboxPayment:checked').each(function(){
                      var id = $(this).val()
                      array.push({
                        id:id,
                        newhalaga:$(`.newhalaga[id='${id}']`).val()
                        })
                    })

                    for(var i=0;i<array.length;i++)
                    {
                        total += parseFloat(array[i].newhalaga)
                      var newtotal = parseFloat(totalPrice) - total
                    console.log('NEW TOTAL', newtotal)
                    }
                    console.log('TOTAL 3',total)
                    $('.amountNeeded').val(newtotal)
                    $('#AmountNeeded').text('₱'+newtotal)
                  $('.gcTotal').val(0)
                  $('#totalGCval').text(' ')
              }
            }
            else
            {
              var totalPrice = $('.totalPrice').val()
              var gc_total = $('.gcTotal').val()
              var total = parseFloat(gc_total) + parseFloat(amountNeeded)
              console.log('TOTAL 2', total)
               $('.amountNeeded').val($('.totalPrice').val())
                $('#AmountNeeded').text('₱'+$('.totalPrice').val())
              $('.gcTotal').val(0)
            }
          }
          
          else if(e.target.checked==false && $('.selectpickerGc').val().length==0)
          {
            if($('.paid_stats').val() != 3)
            {
              $('.selectpickerGc').attr('disabled',true)
              $('.selectpickerGc').val(0);
              $('.selectpickerGc').selectpicker("refresh");
              $('#totalGCval').text(' ')
              if($('#checkboxPoints')[0].checked == false ) // IF PAYMENT USING POINTS IS UNCHECK
              {
                var totalPrice = $('.totalPrice').val()
                $('.amountNeeded').val(totalPrice)
                $('#AmountNeeded').text('₱'+totalPrice)
                $('.gcTotal').val(0)
              }
              else
              {
                var gc_total = $('.gcTotal').val()
                var total = parseFloat(gc_total) + parseFloat(amountNeeded)
                $('.amountNeeded').val(total)
                $('#AmountNeeded').text('₱'+total)
                $('.gcTotal').val(0)
              }
            }
            else
            {
                var gc_total = $('.gcTotal').val()
                var total = parseFloat(gc_total) + parseFloat(amountNeeded)
                $('.amountNeeded').val($('.totalPrice').val())
                $('#AmountNeeded').text('₱'+$('.totalPrice').val())
                $('.gcTotal').val(0)
                $('.selectpickerGc').attr('disabled',true)
                $('.selectpickerGc').val(0);
                $('.selectpickerGc').selectpicker("refresh");
            }
          }
        })
      })
  script.
    function recalculate(){
            var theFutureTime = moment($("#time").text(),"hh:mm A").format('YYYY-MM-DD HH:mm')
            var sum = 0;                                                          
            var duration = 0
            var table =$('#datatables').DataTable()
            var pagelength = table.page.info().pages
            table.page(0).draw()
            var pinakaTotal = 0
            var originalTotal = 0
            var longest = []
            var newHours = 0
            var newMin = 0
            var highest = 0
            var scriptSession = !{JSON.stringify(reqSession)};
            var vat= scriptSession.utilities[0].vat
                vat = parseFloat(vat) / parseFloat(100)
      
          for (var i=1;i<=pagelength;i++){
            
            $(".checkbox:checked").each(function(){
            var id= $(this).val()
            var quantity =$(`.quantity[service_id='${id}']`).text()
            var restype = $('.restype[id="restype"]').val()
            var totals = $(`.hiddenTotal[id='${id}'`).val()
            var vat_totals = totals * vat
                if($('.vat_exempt_custHidden').val() == 1){
                totals = totals - vat_totals
                var origTotal = totals + vat_totals
                //- $('.originalPrice').css('display','block')
                //- $('.originalPrice').text('₱'+origTotal)
                } else {
                  
                }
            var points = $(`.points[id='${id}']`).val()
            points = points * quantity
            if(restype=='single')
              {
                var hours = Math.floor( $(`.duration[id='${id}']`).val() / 60);          
                var minutes = $(`.duration[id='${id}']`).val() % 60;
                hours = hours * quantity;
                minutes = minutes * quantity;
                theFutureTime = moment(theFutureTime).add(hours,'hours').add(minutes, 'minutes')
                $(`.bagongDuration[id='${id}']`).val(moment().hour(hours).minute(minutes).format('hh:mm'))
                $('#totalDuration').text(moment(theFutureTime).format('hh:mm A'))
              }
                //- sum += parseFloat(points)
            else if(restype=='multiple')
              {
                var minutes = $(`.duration[id='${id}']`).val();
                minutes = minutes * quantity;

                theFutureTime = moment(theFutureTime).add(highest, 'minutes')

                $(`.bagongDuration[id='${id}']`).val(minutes)
                longest.push($(`.bagongDuration[id='${id}']`).val())  

              }
              originalTotal = eval(originalTotal+"+"+origTotal)
              pinakaTotal = eval(pinakaTotal+"+"+totals);
              $('#grandtotal').text('₱'+parseFloat(pinakaTotal).toFixed(2).toLocaleString()+'')
              $('.hiddenGrandTotal').val(parseFloat(pinakaTotal).toFixed(2))
              $('.originalTotal').val(parseFloat(originalTotal).toFixed(2))
            sum += parseFloat(points)
          });
          if(i==pagelength){
            
            for(var j=0;j<longest.length;j++)
              {
                
                

                if((longest.length-1)==0)
                  {

                    highest= longest[j];
                    newHours = Math.floor(highest / 60)
                    newMin = highest % 60
                    //- console.log("HOURS: "+newHours)
                    //- console.log("MINUTES: "+newMin)

                  }
                else if(parseFloat(longest[j]) > parseFloat(highest))
                  {

                    highest = longest[j];
                    newHours = Math.floor(highest / 60)
                    newMin = highest % 60

                  }
                if(j == longest.length - 1){

                  theFutureTime = moment(theFutureTime).add(newHours,'hours').add(newMin, 'minutes')
                  $('#totalDuration').text(moment(theFutureTime).format('hh:mm A'))
                  table.page(0).draw()
                  $('#grandtotalPoints').text(parseFloat(sum).toFixed(2))
                }   
              }

          }
            $('#grandtotalPoints').text(parseFloat(sum).toFixed(2))
          table.page('next').draw('page');
          }
          table.page(0).draw()
        }

  //- CHECK THERAPIST AVAILABILITY
  script.
    $(document).ready(function(){
      $('#selected_therapist').on('change',function(){
      var therapist_id= $(this).val()
      var restype = !{JSON.stringify(reservetype)}
      var walkin_date = !{JSON.stringify(dateHello)}
          walkin_date= moment(walkin_date).format('YYYY-MM-DD')
      var time_pick = !{JSON.stringify(time)}
      //- console.log('THERAPIST ID ',therapist_id)
      //- console.log('asd',walkin_date)
      //- console.log(time_pick)
      
      $.post('/frontdesk/TherapistValidate',{therapist_id,walkin_date,time_pick,restype}).done(function(data){
        //- console.log(data)
        var therapist_name = data.out[0].therapist_fname+' '+data.out[0].therapist_mname+' '+data.out[0].therapist_lname
        if(data.alertDesc==0)
        {
          swal({
            title: therapist_name+' is not available',
            text: 'Choose another therapist'
          })
          $('#selected_therapist').val('default');
          $('#selected_therapist').selectpicker("refresh");
        }
      })
      })
    })

  script.
    $(document).ready(function(){
      var room_id = $('#roomId').val()
      //- console.log(room_id)
      $.post('./CheckRoomDetails',{room_id}).done(function(data){
        if(data.room_rate==0)
        {
          $('#roomRate').append('FREE')
          $('#rateNgRoom').val(0)
        }
        else
        {
          $('#roomRate').append('₱'+data.room_rate+'')
          $('#rateNgRoom').val(data.room_rate)
        }
      })
      var reservation_date = $('#dateRes').val()
      $('#date').text(moment(reservation_date).format('MMMM DD, YYYY'))
    })
  
  script.
    //- [SUMMARY]
    $('.buttonSummary').click(function(){

      if($('.checkbox:checked').length==0)
      {
        swal({
          title: 'No Services Selected',
          icon: 'warning'
        })
      }
      else
      {
              var bed_occupied_boys = $('#male').val()
              var bed_occupied_girls = $('#female').val()
              var restype = $('.restype[id="restype"]').val()
              if(restype=='single')
              {
                var bed_quantity= 1
                $('#reservationSummary').modal('show')
              }
              else if(restype='multiple')
              {
               
                if(parseInt($('.total_res').val()) > parseInt($('.total_quant').val())){
                swal({
                        title: 'Total services selected should be equal or more than the total number customer.',
                        icon: 'warning'
                      })
                }
                else{
                $('#reservationSummary').modal('show')
                }
              }

              var table =$('#datatables').DataTable()
              var pagelength = table.page.info().pages
                table.page(0).draw()
              var idService =[]
              var serviceQuantity=[]
              var serviceNewDuration=[]
              var serviceTotal=[]
              var idPromo =[]
              var promoQuantity=[]
              var promoNewDuration=[]
              var promoTotal=[]
              var idPackage =[]
              var packageQuantity=[]
              var packageNewDuration=[]
              var packageTotal=[]
              var typeServ=[]
              var restype = !{JSON.stringify(reservetype)}
              //- console.log('serviceQuantity',serviceQuantity)
              //- console.log('serviceNewDuration',serviceNewDuration)
              //- console.log('serviceTotal',serviceTotal)
              //- console.log('idService',idService)
              //- console.log(serviceTotal)
              //- console.log('promoQuantity',promoQuantity)
              //- console.log('promoNewDuration',promoNewDuration)
              //- console.log('promoTotal',promoTotal)
              //- console.log('idPromo',idPromo)
              //- console.log(promoTotal)
              //- console.log('packageQuantity',packageQuantity)
              //- console.log('packageNewDuration',packageNewDuration)
              //- console.log('packageTotal',packageTotal)
              //- console.log('idPackage',idPackage)
              //- console.log(packageTotal)
              //- console.log(typeServ)
                for (var i=1;i<=pagelength;i++){
                  $('.checkbox:checked').each(function(){
                    var id = $(this).val()
                    var type =$(`.typeServ[id='${id}']`).val()
                    //- console.log(type)
                    if(type == 'service')
                    {

                      typeServ.push(type)
                      idService.push(id)
                      serviceQuantity.push($(`.quantity[service_id='${id}'`).text())
                      serviceNewDuration.push($(`.bagongDuration[id='${id}']`).val())
                      serviceTotal.push($(`.hiddenTotal[id='${id}']`).val())
                    }
                    else if(type=='package')
                    {
                      typeServ.push(type)
                      idPackage.push(id)
                      packageQuantity.push($(`.quantity[service_id='${id}'`).text())
                      packageNewDuration.push($(`.bagongDuration[id='${id}']`).val())
                      packageTotal.push($(`.hiddenTotal[id='${id}']`).val())
                    }
                    else if(type='promo')
                    {
                      typeServ.push(type)
                      idPromo.push(id)
                      promoQuantity.push($(`.quantity[service_id='${id}'`).text())
                      promoNewDuration.push($(`.bagongDuration[id='${id}']`).val())
                      promoTotal.push($(`.hiddenTotal[id='${id}']`).val())
                    }
                    var serviceId = $(`.id[id='${id}']`).val()
                    var serviceName = $(`.name[id='${id}']`).val()
                    var quantity= $(`.quantity[service_id='${id}'`).text()
                    var totalPrice = $(`.total[service_id='${id}']`).text()
                    var bagongDuration=$(`.bagongDuration[id='${id}']`).val()
                    //- bagongDuration=moment.duration(bagongDuration).asMinutes()
                    //- console.log('BG',bagongDuration)
                    $('#viewServices').append(`
                      <tr>
                      <td>${serviceName}</td>
                        <input type='hidden' value="${serviceId}" id="serviceId"></input>
                      <td>${quantity}
                      </td>
                      <td>${bagongDuration} minutes
                      </td>
                      <td>${totalPrice}</td>
                      `)
                    $('#reservationSummary').on('hidden.bs.modal', function (){
                      $('#viewServices').empty()
                      $('#Room').empty()
                    })
                  })
                  table.page('next').draw('page');
                }

              $('#datatablesSummary').DataTable({"lengthMenu": [[5, 25, 50, -1], [5, 25, 50, "All"]],retrieve: true})
              
              $('#reservationSummary').on('hidden.bs.modal', function (){
                 $('#RateOfRoom').empty()
                $('.RateofRoom').empty()
              })
                //- var serviceQuantity = []
                //- var serviceNewDuration = []
                //- var serviceTotal = []
                //- var idService = []
                
              
              var Name = $('#name').text()
              var Gender = $('#gender').text()
              var Room = $('#room').text()
              var roomFee= $('#rateNgRoom').val()
              var Date = $('#date').text()
              var Time = moment($("#time").text(),"hh:mm A").format('hh:mm A')
              var EndTime = $('#totalDuration').text()
              var finalTotal = $('#grandtotal').text()
              var hidden_finalTotal =$('.hiddenGrandTotal').val()
              var finalPoints = $('#grandtotalPoints').text()
              $('#timeStart').val(Time)
              $('#timeEnd').val(EndTime)
              $('#Name').text(Name)
              $('#Gender').text(Gender)
              $('#Room').text(Room)
              if($('#rateNgRoom').val()==0)
              { 
                $('#RateOfRoom').text(`FREE`)
                $('.RateofRoom').val($('#rateNgRoom').val())
              }
              else
              {
                var date_Only = moment().format('MMMM DD, YYYY')
                var simulangOras = $('#time').text()
                    simulangOras = date_Only+' '+simulangOras
                    //- console.log('SIMULA',simulangOras)
                var taposOras = $('#totalDuration').text()
                    taposOras = date_Only+' '+taposOras
                    //- console.log('TAPOS',taposOras)

                var rate = $('#rateNgRoom').val()
                var oras = moment(moment(taposOras)).diff(moment(simulangOras))
                    oras = moment.duration(oras).asHours()
                    oras = oras.toString().split('.');
                    //- console.log(oras)
                    if(oras.length > 1){
                      oras = eval(eval(oras[0]+'+'+1)+'*'+rate)
                    //- console.log(oras)
                    }
                    else{
                    oras = oras[0] * rate

                    }

                    $('#RateOfRoom').text(`₱${oras}`)
                    $('.RateofRoom').val(oras)

              }
              //- $('#RateOfRoom').text(roomFee)
              $('#Date').text('Date: '+moment(Date).format('MMMM DD, YYYY'))
              $('#ReservationTime').text("Time: "+Time+" to "+EndTime)
              if($('#rateNgRoom').val()==0)
              {
                $('#finalTotal').text(`₱${hidden_finalTotal}`)
                $('#finalPoints').text(finalPoints)
                $('.earlyHiddenTotal').val(hidden_finalTotal)
                $('.earlyHiddenPoints').val(finalPoints)

              }
              else
              {
                var hiddenTotal = $('.hiddenGrandTotal').val()
                var rateNgRoom = $('.RateOfRoom').val()

                var newTots = parseFloat(hiddenTotal) + parseFloat(rateNgRoom)

                $('#finalTotal').text(`₱${newTots}`)
                $('.earlyHiddenTotal').val(newTots)
                $('.earlyHiddenPoints').val(finalPoints)
                $('#finalPoints').text(finalPoints)
              }
            
              $('.submitButton').click(function(){
                console.log($('#locker_num').val())
                //- var finalTotal= $('#finalTotal').text().replace(/,/g,'')
                console.log($('#selected_therapist').val().length)
                  if($('#selected_therapist').val().length == 0 && restype =='single')
                  {
                    swal({
                      title: 'Error',
                      text: 'You must select therapist',
                      icon: 'warning'
                    })
                  }
                  else if ($('#selected_therapist').val().length != $('.total_res').val()  && restype =='multiple'){
                    swal({
                      title: 'Error',
                      text: 'Therapist/s must be equal to the total number of customer',
                      icon: 'warning'
                    })

                  }
                  else
                  {
                    var scriptSession = !{JSON.stringify(reqSession)};
                    var membership_fee= scriptSession.utilities[0].membership_fee
                      swal({
                        title: 'Book now?',
                        icon: 'info',
                        buttons: {paylater: {
                                      text: "Cancel",
                                      value: "cancel",
                                      ButtonColor: '#0000'
                        },confirm:{
                          text: "Book",
                          value: "paylater"
                        }
                        },
                      }).then(function(value){
                        //- console.log('value',value)
                        if(value=='cancel')
                        {
                          
                        }
                        else if(value=='paylater')
                        {
                            var scriptSession = !{JSON.stringify(reqSession)};
                            //- console.log(scriptSession)
                            var allowance_time = scriptSession.utilities[0].reservation_timeAllowance
                            //- console.log(allowance_time)
                            var timeEnd= $('#timeEnd').val()
                            console.log(timeEnd)
                                timeEnd = moment(timeEnd,'hh:mm A').add(allowance_time,'minutes').format('hh:mm A')
                            //- console.log("TIME END "+timeEnd)
                            $.post('/bookreservation/addReservation',{
                            locker_num : $('#locker_num').val(),
                            customerId :$('#customerId').val(),
                            restype,
                            typeServ,
                            serviceId: idService,
                            serviceQuantity: serviceQuantity,
                            serviceNewDuration: serviceNewDuration,
                            serviceTotal: serviceTotal,
                            bed_occupied_boys: $('#male').val(),
                            bed_occupied_girls: $('#female').val(),
                            packageId: idPackage,
                            packageQuantity: packageQuantity,
                            packageNewDuration: packageNewDuration,
                            packageTotal: packageTotal,
                            promoId: idPromo,
                            promoQuantity: promoQuantity,
                            promoNewDuration: promoNewDuration,
                            promoTotal: promoTotal,
                            therapist_id: $('#selected_therapist').val(),
                            timeStart : $('#timeStart').val(),
                            timeEnd,
                            date : $('#dateRes').val(),
                            finalTotal : $('.earlyHiddenTotal').val(),
                            finalPoints : $('.earlyHiddenPoints').val(),
                            roomId :$('#roomId').val()
                            }).done(function(data){
                              if(data.alertDesc==1)
                              {
                              swal({
                                title:'Success', 
                                text:'New Reservation Added', 
                                icon:'success'
                                }).then(function(){
                                  location.reload()
                                })
                            }
                            else
                              {
                                swal({
                                  title:'Not Success', 
                                  text:'', 
                                  icon:'warning'
                                  })
                              } 
                            })
                        }
                        else
                        {

                        }
                      })
                  }
                //- }
                //- else if(restype=='multiple')
                //- {
                  
                //-   if($('#selected_therapist').val()==0 || $('#selected_therapist').val()==null)
                //-   {
                //-     swal({
                //-       title: 'Error',
                //-       text: 'You must select therapist',
                //-       icon: 'warning'
                //-     })
                //-   }
                //-   //- console.log($('#selected_therapist').val().length == $('.total_res').val())
                //-   //- console.log($('#selected_therapist').val().length)
                //-   //- console.log($('.total_res').val())
                //-   if($('#selected_therapist').val().length != $('.total_res').val()){
                //-     swal({
                //-       title: 'Error',
                //-       text: 'Therapist/s must be equal to the total number of customer',
                //-       icon: 'warning'
                //-     })
                //-   }
                //-   else
                //-   {
                    //- var scriptSession = !{JSON.stringify(reqSession)};
                    //- var membership_fee= scriptSession.utilities[0].membership_fee
                    //-   swal({
                    //-     title: 'Pay Now or Later?',
                    //-     icon: 'info',
                    //-     buttons: {paylater: {
                    //-                   text: "Pay Later",
                    //-                   value: "paylater",
                    //-                   ButtonColor: '#0000'
                    //-     },confirm:{
                    //-       text: "Pay Now",
                    //-       value: "paynow"
                    //-     }
                    //-     },
                    //-   }).then(function(value){
                    //-     console.log('value',value)
                    //-     if(value=='paynow')
                    //-     {
                    //-       $('#RoomAvailed').append(`Room: ${Room}`)
                    //-       if($('.RateOfRoom').val()==0)
                    //-       {
                    //-         $('#RoomRateAvailed').append(`Room Fee: FREE`)
                    //-       }
                    //-       else
                    //-       {
                    //-         var rateRate = $('.RateOfRoom').val()
                    //-         $('#RoomRateAvailed').append(`Room Fee: ₱${rateRate}`)
                    //-       }
                    //-       $('#DateReserv').append(`Reservation Date: ${Date}`)
                    //-       $('#TimeReserv').append(`Reservation Time: ${Time} to ${EndTime}`)
                    //-       $.post('./CheckCustomer/Details',{
                    //-         cust_id: $('#customerId').val()
                    //-       }).done(function(data){
                    //-         console.log(data)
                    //-         $('#checkout').modal('show')
                    //-         $('#reservationSummary').modal('hide')
                    //-         if(data[0].cust_type==0)
                    //-         {
                    //-           if($('.RateOfRoom').val()==0)
                    //-           {
                    //-             $('#TotalPrice').append(`Total: ${finalTotal}`)
                    //-             $('.totalPrice').val(`${hidden_finalTotal}`)
                    //-             $('.totalAmountPoints').val(finalPoints)
                    //-             $('.paid_stats').val(3)

          
                    //-           }
                    //-           else
                    //-           {
                    //-             var buo = $('.RateOfRoom').val()
                    //-                 buo = parseFloat(buo) + parseFloat(hidden_finalTotal)
                    //-             $('#TotalPrice').append(`Total: ₱${buo}`)
                    //-             $('.totalPrice').val(`${buo}`)
                    //-             $('.totalAmountPoints').val(finalPoints)
                    //-             $('.paid_stats').val(3)
                    //-           }
                    //-         }
                    //-         else if (data[0].paid_status==0)
                    //-         {
                    //-           hidden_finalTotal=parseFloat(hidden_finalTotal) + parseFloat(membership_fee) 
                    //-           $('#TotalPrice').append(`Total: ₱${hidden_finalTotal}`)
                    //-           $('.totalPrice').val(`${hidden_finalTotal}`)
                    //-           $('.totalAmountPoints').val(finalPoints)

                    //-           $('.paid_stats').val(data[0].paid_status)
                    //-         }
                    //-         else
                    //-         {
                    //-           if($('.RateOfRoom').val()==0)
                    //-           {
                    //-             $('#TotalPrice').append(`Total: ${finalTotal}`)
                    //-             $('.totalPrice').val(`${hidden_finalTotal}`)
                    //-             $('.totalAmountPoints').val(finalPoints)
                    //-             $('.paid_stats').val(1)
                    //-           }
                    //-           else
                    //-           {
                    //-             var buo = $('.RateOfRoom').val()
                    //-                 buo = parseFloat(buo) + parseFloat(hidden_finalTotal)
                    //-             $('#TotalPrice').append(`Total: ₱${buo}`)
                    //-             $('.totalPrice').val(`${buo}`)
                    //-             $('.totalAmountPoints').val(finalPoints)
                    //-             $('.paid_stats').val(1)
                                
                    //-           }
                    //-         }
                          
                    //-             $('#TotalPoints').append(`Total Points to be earned: ${finalPoints}`)
                    //-             $('.totalAmountPoints').val(finalPoints)
                    //-             $('.hello').val(data[0].cust_id)
                                




                    //-         if(data[0].cust_type==0)
                    //-         {
                    //-         }
                    //-         else
                    //-         {
                    //-             $('.hello').addClass('hidden')
                    //-             $('.newPoints').val(data[0].member_points)
                    //-             $('.currentPoints').val(data[0].member_points)
                    //-             $('#appendDito').append(`
                    //-               <div class="form-group has-default bmd-form-group">
                    //-               <label> Current Points: ${data[0].member_points}
                    //-                 <div class="checkbox">
                    //-                   <input id="checkboxPoints" type="checkbox"/>
                    //-                   <label for="checkboxPoints">Pay using Points</label>
                    //-                 </div>
                    //-             </div>`)
                    //-         }

                    //-         $('#custName').append(`Customer Name: ${data[0].cust_fname} ${data[0].cust_mname} ${data[0].cust_lname}`)
                    //-             var table =$('#datatables').DataTable()
                    //-             var pagelength = table.page.info().pages
                    //-           for (var i=1;i<=pagelength;i++){
                    //-                 $('.checkbox:checked').each(function(){
                    //-                   var id = $(this).val()
                    //-                   //- idService.push(id)
                    //-                   //- serviceQuantity.push($(`.quantity[service_id='${id}'`).text())
                    //-                   //- serviceNewDuration.push($(`.bagongDuration[id='${id}']`).val())
                    //-                   //- serviceTotal.push($(`.total[service_id='${id}']`).text())
                    //-                   var serviceId = $(`.id[id='${id}']`).val()
                    //-                   var serviceName = $(`.name[id='${id}']`).val()
                    //-                   var quantity= $(`.quantity[service_id='${id}'`).text()
                    //-                   var totalPrice = $(`.total[service_id='${id}']`).text()
                    //-                   var hiddenTotal = $(`.hiddenTotal[id='${id}']`).val()
                    //-                   var bagongDuration=$(`.bagongDuration[id='${id}']`).val()
                    //-                   var service_equivalentPoints = $(`.eqPoints[id='${id}']`).val()
                    //-                   var total_equivalentPoints = parseFloat(quantity) * parseFloat(service_equivalentPoints)
                    //-                   if($('.RateOfRoom').val()==0)
                    //-                   {
                    //-                     $('.amountNeeded').val(hidden_finalTotal)
                    //-                     $('#AmountNeeded').text('₱'+hidden_finalTotal+'')
                    //-                   }
                    //-                   else
                    //-                   {
                    //-                     var totalNew = $('.RateOfRoom').val()
                    //-                         totalNew = parseFloat(totalNew) + parseFloat(hidden_finalTotal)
                    //-                     $('.amountNeeded').val(totalNew)
                    //-                     $('#AmountNeeded').text('₱'+totalNew+'')
                    //-                   }
                                      
                    //-                   $('#viewServicesAvailed').append(`
                    //-                     <tr>
                    //-                     <td>${serviceName}
                    //-                       <input class="servname" type='hidden' value="${serviceName}" id="${serviceId}">
                    //-                     </td>
                    //-                     <td>${quantity}
                    //-                       <input class="quantityTotal" type='hidden' value="${quantity}" id="${serviceId}">
                    //-                     </td>
                    //-                     <td>${totalPrice}
                    //-                       <input class="halaga" type='hidden' value="${hiddenTotal}" id="${serviceId}">
                    //-                       <input class="newhalaga" type='hidden' value="" id="${serviceId}">

                    //-                     </td>
                    //-                     <td>${total_equivalentPoints}
                    //-                       <input class="eqTotal" type='hidden' value="${total_equivalentPoints}" id="${serviceId}">
                    //-                       <input class="newPointsEq" type='hidden' value="" id="${serviceId}">
                    //-                     </td>
                    //-                     <td>
                    //-                       <input class="checkboxPayment" type="checkbox" value="${serviceId}" style='display:none' />
                    //-                     </td>
                    //-                     `)
                    //-                   $('#reservationSummary').on('hidden.bs.modal', function (){
                    //-                     $('#viewServices').empty()
                    //-                   })
                    //-                 })
                    //-       table.page('next').draw('page');
                    //-               }
                    //-           $('#datatablesPaynow').DataTable()
                    //-       })
                    //-       $('#checkout').on('hidden.bs.modal', function (){
                    //-     $('#viewServicesAvailed').empty()
                    //-     $('#custName').empty()
                    //-     $('#TotalPrice').empty()
                    //-     $('.totalPrice').empty()  
                    //-     $('#TotalPoints').empty()
                    //-     $('#viewServicesAvailed').empty()
                    //-     $('#appendDito').empty()
                    //-     $('#RoomRate').empty()
                    //-     $('#DateReserv').empty()
                    //-     $('#TimeReserv').empty()
                    //-   })
                        
                    //-   //- ==================================================================================================================================================================
                      
                      
                    //-           // [DONE - PAYMENT - SUBMIT]
                    //-           $('.buttonDone').click(function(){
                    //-             var paid_stats = $('.paid_stats').val()
                    //-             console.log('paid_stats',paid_stats)
                    //-           })
                          
                    //-     }
                    //-     else if(value=='paylater')
                    //-     {
                    //-         var bed_occupied_boys = $('#male').val()
                    //-         var bed_occupied_girls = $('#female').val()
                    //-         var scriptSession = !{JSON.stringify(reqSession)};
                    //-         var allowance_time = scriptSession.utilities[0].reservation_timeAllowance
                    //-         var timeEnd= $('#timeEnd').val()
                    //-             timeEnd = moment(timeEnd,'hh:mm A').add(allowance_time,'minutes').format('hh:mm A')
                    //-         $.post('/bookreservation/addReservation',{
                    //-         customerId :$('#customerId').val(),
                    //-         restype,
                    //-         typeServ,
                    //-         serviceId: idService,
                    //-         serviceQuantity: serviceQuantity,
                    //-         serviceNewDuration: serviceNewDuration,
                    //-         serviceTotal: serviceTotal,
                    //-         bed_occupied_boys: $('#male').val(),
                    //-         bed_occupied_girls: $('#female').val(),
                    //-         packageId: idPackage,
                    //-         packageQuantity: packageQuantity,
                    //-         packageNewDuration: packageNewDuration,
                    //-         packageTotal: packageTotal,
                    //-         promoId: idPromo,
                    //-         promoQuantity: promoQuantity,
                    //-         promoNewDuration: promoNewDuration,
                    //-         promoTotal: promoTotal,
                    //-         therapist_id: $('#selected_therapist').val(),
                    //-         timeStart : $('#timeStart').val(),
                    //-         timeEnd,
                    //-         date : $('#dateRes').val(),
                    //-         finalTotal : $('.earlyHiddenTotal').val(),
                    //-         finalPoints : $('.earlyHiddenPoints').val(),
                    //-         roomId :$('#roomId').val()
                    //-         }).done(function(data){
                    //-           if(data.alertDesc==1)
                    //-           {
                    //-           swal({
                    //-             title:'Success', 
                    //-             text:'New Reservation Added', 
                    //-             icon:'success'
                    //-             }).then(function(){
                    //-               location.href='/frontdesk/home'
                    //-             })
                    //-         }
                    //-         else
                    //-           {
                    //-             swal({
                    //-               title:'Not Success', 
                    //-               text:'', 
                    //-               icon:'warning'
                    //-               })
                    //-           } 
                    //-         })
                    //-     }
                    //-     else
                    //-     {

                    //-     }
                    //-   })
                  //- }            
                //- }
             
            })
            
      }
    })
  script.
    $(document).ready(function(){
      $('.checkbox').on('change.bootstrapSwitch', function(e){
        if(e.target.checked==true)
        {
          var id = $(this).val()
          var service_name = $(`.name[id='${id}']`).val()
          var qnty
          var y=$(this).val()
          var price = $(`.price[id='${y}']`).val()
          var hours = Math.floor( $(`.duration[id='${y}']`).val() / 60);          
          var minutes = $(`.duration[id='${y}']`).val() % 60;
          var points = $(`.points[id='${y}']`).val()
          var duration = $(`.duration[id='${y}']`).val()
          var total_quant = parseInt($('.total_quant').val())
          swal({
            title: 'How many '+service_name+'?',
            content: "input",
            buttons: [true,"Confirm"],
          }).then(function(confirm){
            $('.swal-content__input').attr('type', 'number')
            var quantity = $('.swal-content__input').val()
            if(confirm)
            {
              if (quantity==null || quantity=="")
              {
                e.target.checked=false;
              }
              else
              {
                $(`.quantityInput[service_id='${y}']`).val(quantity)
                total_quant = total_quant + parseInt(quantity)
                $('.total_quant').val(total_quant)
                
                $(`.quantity[service_id='${y}']`).text(quantity)
                total = quantity * price;
                $(`.total[service_id='${y}']`).text('₱'+total.toLocaleString()+'')
                $(`.hiddenTotal[id='${y}']`).val(total)
                var table=$('#datatables').DataTable()
                table.search('').draw()
                

              }
              recalculate()
            }
            else
            {
              e.target.checked=false;
            }
          })
        }

        else if(e.target.checked==false)
        {
          var y=$(this).val()
          var total = $(`.hiddenTotal[id='${y}']`).val()
          var grandTotal = $('.hiddenGrandTotal').val()
          var finalTotal = grandTotal - total
          var quant = $(`.quantityInput[service_id='${y}']`).val()
          var total_quant = $('.total_quant').val()
              total_quant = total_quant - quant
              $('.total_quant').val(total_quant)
          $(`.quantityInput[service_id='${y}']`).val('')
          $(`.quantity[service_id='${y}'] `).text("0")
          $(`.total[service_id='${y}']`).text("₱0")
          $(`.hiddenTotal[id='${y}']`).val(0)
          $('#grandtotal').text(finalTotal.toLocaleString())
          $(`.hiddenGrandTotal`).val(finalTotal)
          if($(".checkbox:checked").length==0)
          {
            $('#grandtotal').text("₱0")
            $(`.hiddenGrandTotal`).val(0)
          }
        }
      })
      
    })

      
  script.
    $(document).ready(function(){
      $(".checkbox").change(function(){
        recalculate()
        
        if($(this)[0].checked==false)
        {
          var aydi = $(this).attr('value')
          $(`.bagongDuration[id='${aydi}']`).val('')
        }
        var test = $(".checkbox:checked");
        if(test.length == 0){
          $('#totalDuration').text('0')
        }
        });
    })
  script.
    $(document).ready(function(){
      $('.logout').click(function(){
            swal({
        title: "Are you sure?",
        text: "Do you want to Log Out?",
        icon: "warning",
        buttons: true,
        dangerMode: true,
      })
      .then((willDelete) => {
        if (willDelete) {
          $.post('./logout')
          location.reload()
        } 
      });
      })
    })
  script.
    $(document).ready(function() {
      var interval = setInterval(function() {
          var momentNow = moment();
          $('#date-part').html(momentNow.format('YYYY MMMM DD') + ' '
                              + momentNow.format('dddd')
                              .substring(0,3).toUpperCase());
          $('#time-part').html(momentNow.format('A hh:mm:ss'));
      }, 100);
      
      $('#stop-interval').on('click', function() {
          clearInterval(interval);
      });
      $('#calendar').val('')
      });
  script(type='text/javascript').
    $(document).ready(function(){
    demo.initOverviewDashboard();
    demo.initCirclePercentage();
    });
  script(type='text/javascript').
    $(document).ready(function(){
    demo.initWizard();
    });
  script(type='text/javascript').
    $(document).ready(function(){
    demo.initFullCalendar();
    });
  script(type='text/javascript').
    $(document).ready(function() {
    $('#datatables').DataTable({"lengthMenu": [[5, 25, 50, -1], [5, 25, 50, "All"]]});
    });
  script(type='text/javascript').
    $(document).ready(function() {
    $('#datatablesPackage').DataTable({"lengthMenu": [[5, 25, 50, -1], [5, 25, 50, "All"]]});
    });
  script(type='text/javascript').
    $(document).ready(function() {
    $('#datatablesPromo').DataTable({"lengthMenu": [[5, 25, 50, -1], [5, 25, 50, "All"]]});
    });

  script.
    $(document).ready(function(){
      $('.viewdetailsButton').click(function(){
        var id = $(this).val()
        $.post('/payment/query/CheckoutDets',{id:id})
        .done(data=>{
          $('#viewDetails').modal('show')
        })
      })
    })



  //- PASSWORD VALIDATION
  script.
    $(document).ready(function(){
      // FIRST PASSWORD
      $('#password1').on('change paste keyup', function(){
        $('#ValidLength').empty()
        if($(this).val() != 0)
        {
          $('#password2').attr('disabled',false)
        }
        else
        {
          $('#password2').attr('disabled',true)
          $('#password2').val('')
        }
        if($(this).val().length == 7 || $(this).val().length == 8 || $(this).val().length == 9)
        {
          $('#ValidLength').append('your password is medium')
          $('#ValidLength').css('color','orange')
        }
        else if($(this).val().length <= 7)
        {
          $('#ValidLength').append('your password is too short')
          $('#ValidLength').css('color','red')
          $('#password2').attr('disabled',true)
        }
        else if($(this).val().length >= 10 )
        {
          $('#ValidLength').append('your password is strong')
          $('#ValidLength').css('color','green')
        }

        if($(this).val()==0)
        {
          $('#ValidLength').empty()
          $('#ValidPass').empty()
        }
      })
      // SECOND PASSWORD
      $('#password2').on('change paste keyup', function(){
          $('#ValidPass').empty()
        if($(this).val() != $('#password1').val())
        {
          $('#ValidPass').append(`Di Equal`)
          $('#ValidPass').css('color','red')
        }
        else if($(this).val() == $('#password1').val())
        {
          $('#ValidPass').append(`Equal`)
          $('#ValidPass').css('color','green')
        }
        if($(this).val().length == 0)
        {
          $('#ValidPass').empty()
        }
      })
    })

    // USERNAME VALIDATION
    $('#username').on('change paste keyup',function(){
      $('#ValidUsername').empty()
      var username = $(this).val()
        if(username.length <= 5 )
        {
          $('#ValidUsername').append('your username is too short')
          $('#ValidUsername').css('color','red')
        }
        if (username.length == 0)
        {
          $('#ValidUsername').empty()
        }
    })
  script.
    $(document).ready(function(){
      $('.hello').click(function(){
        var id = $(this).val()
        var scriptSession = !{JSON.stringify(reqSession)}
        var membership_fee = scriptSession.utilities[0].membership_fee
        var membership_validity = scriptSession.utilities[0].membership_validity
        var date_now = moment(new Date()).format('MMMM DD, YYYY')
        var validity = moment(date_now).add(membership_validity,'months').format('MMMM DD, YYYY')
          $('#RegisterModal').modal('show')
          $('#fee').append(`₱${membership_fee}`)
          $('#checkout').modal('hide')
          $('.buttonRegister').click(function(){
        var password1 = $('#password1').val()
        var password2 = $('#password2').val()
        var username = $('#username').val()
            if(password1 == password2 && password1 != 0 && password2 != 0)
            {
              
              $.post('/payment/register',{
                username: $('#username').val(),
                password: $('#password1').val(),
                id:id})
                .done(function(data){
                  //- console.log(data)
                  if(data.alertDesc==0)
                    {
                      swal({
                        title: "Success",
                        icon: "success"
                      }).then(function(){
                        $('#checkout').modal('show')
                        $('#RegisterModal').modal('hide')
                      })
                    }
                  else if(data.alertDesc==3)
                    {
                      swal({
                        title:'Not Success', 
                        text:'Username Already Exist', 
                        icon:'warning'
                        })
                    }
                  else if(data.alertDesc==1)
                    {
                      swal({
                        title: 'ERROR',
                        icon: 'error'
                      })
                    }
                })
            }
            if(password1 == 0 && password2 ==0 && username ==0 || password1 == 0 || password2 ==0 || username ==0)
            {
                //- console.log(password1)
                //- console.log(password2)
                //- console.log(username)
              swal({
                  title: 'Please double check the fields.',
                  text: 'Make sure all required fields have value.', 
                  icon: 'warning'
                })
            }
        })
        $('.buttonClose').click(function(){
          $('#RegisterModal').modal('hide')
          $('#checkout').modal('show')
        })

      })
    })
  script.
    $(document).ready(function(){
      $("#id_label_multiple").select2();
    })

