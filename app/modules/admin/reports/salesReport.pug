doctype html
html(lang='en')
  head
    meta(charset='utf-8')
    link(rel='apple-touch-icon', sizes='76x76', href='../paperDashboardPro/img/apple-icon.png')
    link(rel='icon', type='image/png', sizes='96x96', href='../paperDashboardPro/img/favicon.png')
    meta(http-equiv='X-UA-Compatible', content='IE=edge,chrome=1')
    title Online Booking and Spa Management System
    // Canonical SEO
    link(rel='canonical', href='http://www.creative-tim.com/product/paper-dashboard-pro')
    meta(content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0', name='viewport')
    meta(name='viewport', content='width=device-width')
    // Bootstrap core CSS
    link(href='/assets/paperDashboardPro/css/bootstrap.min.css', rel='stylesheet')
    // Paper Dashboard core CSS
    link(href='/assets/paperDashboardPro/css/paper-dashboard.css', rel='stylesheet')
    link(href='/assets/paperDashboardPro/css/buttons.dataTables.min.css', rel='stylesheet')

    // CSS for Demo Purpose, don't include it in your project
    link(href='/assets/paperDashboardPro/css/demo.css', rel='stylesheet')
    // Fonts and icons
    link(href='http://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css', rel='stylesheet')
    link(href='https://fonts.googleapis.com/css?family=Muli:400,300', rel='stylesheet', type='text/css')
    link(href='/assets/paperDashboardPro/css/themify-icons.css', rel='stylesheet')
    style.
      .pull-right .dropdown-menu:after {
        left: auto;
        right: 10px;
          }
      .pull-right .dropdown-menu {
          left: auto;
          right: 0;
      }
  body
    .wrapper
      .sidebar(data-active-color='spa', style='color: white')
        //
          Tip 1: you can change the color of the sidebar's background using: data-background-color="white | brown"
          Tip 2: you can change the color of the active button using the data-active-color="primary | info | success | warning | danger"
        .logo
          a.simple-text.logo-mini(href='')
            | MBAY
          a.simple-text.logo-normal(href='')
            | MBAY Health Spa
        .sidebar-wrapper
          .user
            .info
              .photo
                img(src='/assets/paperDashboardPro/img/faces/face-2.jpg')
              a.collapsed(data-toggle='collapse', href='#collapseExample')
                span
                  | ADMINISTRATOR
              .clearfix
          ul.nav
            li
              a(href='./admindashboard')
                i.ti-dashboard
                p
                  | Dashboard
            li
              a(data-toggle='collapse', href='#componentsExamples')
                i.ti-clipboard
                p
                  | Maintenance
                  b.caret
              #componentsExamples.collapse
                ul.nav
                  li(style="margin-left: 5px;")
                    a(data-toggle='collapse', href='#services')
                      p
                        span.sidebar-mini S
                        | Services
                        b(style="margin-right: 30px").caret
                    #services.collapse
                      ul.nav
                        li(style="margin-left: 30px")
                          a(href='./adminServiceType')
                            span.sidebar-normal Service Type
                        li(style="margin-left: 30px")
                          a(href='./adminServices')
                            span.sidebar-normal Services
                        li(style="margin-left: 30px")
                          a(href='./adminServiceDuration')
                            span.sidebar-normal Service Duration
                  li(style="margin-left: 5px;")
                    a(data-toggle='collapse', href='#therapist')
                      p
                        span.sidebar-mini T
                        | Therapist
                        b(style="margin-right: 30px").caret
                    #therapist.collapse.in
                      ul.nav
                        li(style="margin-left: 30px")
                          a(href='./adminSpecialty')
                            span.sidebar-normal Therapist Skills
                        li(style="margin-left: 30px")
                          a(href='./adminTherapist')
                            span.sidebar-normal Therapist
                  li(style="margin-left: 5px;")
                    a(data-toggle='collapse', href='#packages')
                      p
                        | Packages
                        span.sidebar-mini P
                        b(style="margin-right: 30px").caret
                    #packages.collapse
                      ul.nav    
                        li(style="margin-left: 30px")
                          a(href='./adminPackages')
                            span.sidebar-normal Packages
                  li(style="margin-left: 5px;")
                    a(data-toggle='collapse', href='#promos')
                      p
                        span.sidebar-mini P
                        | Promos
                        b(style="margin-right: 30px").caret
                    #promos.collapse
                      ul.nav
                        li(style="margin-left: 30px")
                          a(href='./adminPromos')
                            span.sidebar-normal Promos
                  li(style="margin-left: 5px;")
                    a(data-toggle='collapse', href='#rooms')
                      p
                        span.sidebar-mini R
                        | Rooms
                        b(style="margin-right: 30px").caret
                    #rooms.collapse
                      ul.nav
                        li(style="margin-left: 30px")
                          a(href='./adminRoomType')
                            span.sidebar-normal Room Type
                        li(style="margin-left: 30px")
                          a(href='./adminRooms')
                            span.sidebar-normal Rooms
                  li(style="margin-left: 5px;")
                    a(data-toggle='collapse', href='#freebies')
                      p
                        span.sidebar-mini F
                        | Freebies
                        b(style="margin-right: 30px").caret
                    #freebies.collapse
                      ul.nav
                        li(style="margin-left: 30px")
                          a(href='./adminFreebies')
                            span.sidebar-normal Freebies
                  li(style="margin-left: 5px;")
                    a(data-toggle='collapse', href='#gifc')
                      p
                        span.sidebar-mini G
                        | Gift Certificate
                        b(style="margin-right: 30px").caret
                    #gifc.collapse
                      ul.nav
                        li(style="margin-left: 30px")
                          a(href='./giftcertificate')
                            span.sidebar-normal Gift Certificate                     
            li
              a(href="./commission")
                i.ti-envelope
                p
                  | Commission
            li
              a(href="./utilities")
                i.ti-settings
                p
                  | Utilities
            li
              a(data-toggle='collapse', href='#queries')
                i.ti-notepad
                p
                  | Queries
                  b.caret
              #queries.collapse
                ul.nav
                  li(style="margin-left: 30px;")
                    a(href='./loyaltyMembers')
                      span.sidebar-mini 
                      span.sidebar-normal Loyalty Members
                  li(style="margin-left: 30px;")
                    a(href='./servicesList')
                      span.sidebar-mini 
                      span.sidebar-normal Services
                  li(style="margin-left: 30px;")
                    a(href='./packagesList')
                      span.sidebar-mini 
                      span.sidebar-normal Packages
                  li(style="margin-left: 30px;")
                    a(href='./promoList')
                      span.sidebar-mini 
                      span.sidebar-normal Promos
                  li(style="margin-left: 30px;")
                    a(href='./therapistList')
                      span.sidebar-mini 
                      span.sidebar-normal Therapists
                  li(style="margin-left: 30px;")
                    a(href='./roomList')
                      span.sidebar-mini 
                      span.sidebar-normal Rooms    
      
            li.active
              a(data-toggle='collapse', href='#reports')
                i.ti-bar-chart-alt
                p
                  | Reports
                  b.caret
              #reports.collapse.in
                ul.nav
                  li.active(style="margin-left: 30px;")
                    a(href='./salesReport')
                      span.sidebar-mini 
                      span.sidebar-normal Sales 
      .main-panel
        nav.navbar.navbar-default
          
            .navbar-header
              button.navbar-toggle(type='button')
                span.sr-only Toggle navigation
                span.icon-bar.bar1
                span.icon-bar.bar2
                span.icon-bar.bar3
              a.navbar-brand()
                | Sales Report
            .collapse.navbar-collapse
              
              ul.nav.navbar-nav.navbar-right
                li
                  a.dropdown-toggle.btn-rotate(href='',data-toggle='dropdown')
                    i.ti-settings
                    p.hidden-md.hidden-lg
                      | Settings
                  ul.dropdown-menu
                    li
                      a.logout(style="cursor: pointer;") Log Out
        .content
          .container-fluid
            .row
              .col-md-12
                .card
                  .row
                    .card-content
                      center
                        h2#Name Report
                          
                  
                  .content
                    .container-fluid
                      .row
                        .col-md-2(style='float: right')
                          button.btn.btn-info.btn-fill.btn-wd#button-a Generate Report
                        .col-md-2(style='float: left')
                          
                           select.selectpicker#report_type(name=''  data-style='btn-info' )
                                option(value='0') All
                                option(value='1') Loyalty
                                option(value='2') Gift Certificate
                                option(value='3') Amenity
                                option(value='4') Reservation
                        .col-md-2(style='float: left')
                           select.selectpicker#sales_type(name='' title='Report'  data-style='btn-info' )
                                option(value='0') Monthly
                                option(value='1') Yearly
                        //- .col-md-3
                        //-   select.selectpicker(multiple='', title='Filter', data-style='btn-info', data-size='7' )
                        //-       option(value='Service Type') Service Type
                        //-       option(value='Duration') Duration
                        //-       option(value='Price') Price         

                        .col-md-12
                          p.category 
                          br
                          .card
                            .card-content
                              .toolbar
                                .fresh-datatables
                                  table#datatables.table.table-no-bordered.table-hover(cellspacing='0', width='100%', style='width:100%')
                                    thead
                                      tr
                                        th.disabled-sorting(style='font-weight:bold; font-size: 30px')#thead 
                                        th.disabled-sorting  
                                        th.disabled-sorting  
                                        th.disabled-sorting  
                                        th.disabled-sorting(style='font-weight:bold; font-size: 30px')#Revenue
                                        th.disabled-sorting  
                                        
                                  
                                    tbody#tbody
                                      //- each monthsNow in monthsNows
                                      //-   tr
                                      //-     td= monthsNow.month
                                      //-     td
                                      //-     td
                                      //-     td
                                      //-     td= (monthsNow.revenue).toFixed(2)
                                      //-     td
                                             
                             
        footer.footer
          .container-fluid
            .copyright.pull-right
              | © 
              script.
                document.write(new Date().getFullYear())
              | , made with 
              i.fa.fa-heart.heart
              |  by 
              a(href='#') Team MBAY
                      .fixed-plugin
  // Core JS Files. Extra: TouchPunch for touch library inside jquery-ui.min.js
  script(src='/assets/paperDashboardPro/js/jquery-3.1.1.min.js', type='text/javascript')
  script(src='/assets/paperDashboardPro/js/jquery-ui.min.js', type='text/javascript')
  script(src='/assets/paperDashboardPro/js/perfect-scrollbar.min.js', type='text/javascript')
  script(src='/assets/paperDashboardPro/js/bootstrap.min.js', type='text/javascript')
  // Forms Validations Plugin
  script(src='/assets/paperDashboardPro/js/jquery.validate.min.js')
  // Promise Library for SweetAlert2 working on IE
  script(src='/assets/paperDashboardPro/js/es6-promise-auto.min.js')
  // Plugin for Date Time Picker and Full Calendar Plugin
  script(src='/assets/paperDashboardPro/js/moment.min.js')
  // Date Time Picker Plugin is included in this js file
  script(src='/assets/paperDashboardPro/js/bootstrap-datetimepicker.js')
  // Select Picker Plugin
  script(src='/assets/paperDashboardPro/js/bootstrap-selectpicker.js')
  // Switch and Tags Input Plugins
  script(src='/assets/paperDashboardPro/js/bootstrap-switch-tags.js')
  // Circle Percentage-chart
  script(src='/assets/paperDashboardPro/js/jquery.easypiechart.min.js')
  // Charts Plugin
  script(src='/assets/paperDashboardPro/js/chartist.min.js')
  // Notifications Plugin
  script(src='/assets/paperDashboardPro/js/bootstrap-notify.js')
  // Sweet Alert 2 plugin
  script(src='/assets/paperDashboardPro/js/sweetalert.js')
  // Vector Map plugin
  script(src='/assets/paperDashboardPro/js/jquery-jvectormap.js')
  // Google Maps Plugin
  script(src='https://maps.googleapis.com/maps/api/js?key=AIzaSyAFPQibxeDaLIUHsC6_KqDdFaUdhrbhZ3M')
  // Wizard Plugin
  script(src='/assets/paperDashboardPro/js/jquery.bootstrap.wizard.min.js')
  // Bootstrap Table Plugin
  script(src='/assets/paperDashboardPro/js/bootstrap-table.js')
  // Plugin for DataTables.net
  script(src='/assets/paperDashboardPro/js/jquery.datatables.js')
  // Full Calendar Plugin
  script(src='/assets/paperDashboardPro/js/fullcalendar.min.js')
  // Paper Dashboard PRO Core javascript and methods for Demo purpose
  script(src='/assets/paperDashboardPro/js/paper-dashboard.js')
  // Sharrre Library
  script(src='/assets/paperDashboardPro/js/jquery.sharrre.js')
  // Paper Dashboard PRO DEMO methods, don't include it in your project!
  script(src='/assets/paperDashboardPro/js/demo.js')
  script(src='/assets/paperDashboardPro/js/buttons.flash.min.js')
  script(src='/assets/paperDashboardPro/js/buttons.html5.min.js')
  script(src='/assets/paperDashboardPro/js/buttons.print.min.js')
  script(src='/assets/paperDashboardPro/js/dataTables.buttons.min.js')
  script(src='/assets/paperDashboardPro/js/jszip.min.js')
  script(src='/assets/paperDashboardPro/js/vfs_fonts.js')
  script(src='/assets/paperDashboardPro/js/jspdf.js')
  //- script(src='/assets/paperDashboardPro/js/jquery-3.3.1.js')
  script(src='/assets/SheetJS/FileSaver.js')
  script(src='/assets/SheetJS/xlsx.full.min.js')
  
  
    
  script(type='text/javascript').
    $(document).ready(function(){
    demo.initOverviewDashboard();
    demo.initCirclePercentage();
    });

  script.
    $(document).ready(function(){
      $(document).on('change','#sales_type',function(){
        var report_type = $('#report_type').val()
        var sales_type = $('#sales_type').val()
        CHANGE_REPORT(report_type,sales_type)
      })
      $('#report_type').on('change',function(){
        var report_type = $('#report_type').val()
        var sales_type = $('#sales_type').val()
        CHANGE_REPORT(report_type,sales_type)
      })

      function CHANGE_REPORT(report_type,sales_type){
        $('#thead').empty()
        $('#tbody').empty()
        $('#Revenue').empty()
        $('#Name').empty()
        if(report_type == 0){
          var name = 'All Report'
        } else if(report_type == 1){
          var name = 'Loyalty Report'
        } else if(report_type == 2){
          var name = 'Gift Certificate Report'
        } else if(report_type == 3){
          var name = 'Amenity Report'
        } else if(report_type == 4){
          var name = 'Reservation Report'
        }
        $.post('./ChangeReport',{sales_type,report_type}).done(function(data){
          $('#Revenue').append('Revenue')
          $('#Name').append(name)
          if(sales_type == 0){
            $('#thead').append('Month')
            for(var i=0;i<data.monthsNows.length;i++)
            {
            console.log(data.monthsNows[i].month)
              $('#tbody').append(`
                  <tr>
                    <td>${data.monthsNows[i].month}</td>
                    <td>
                    </td>
                    <td></td>
                    <td> </td>
                    <td>₱${(data.monthsNows[i].revenue).toFixed(2)}</td>
                    <td> </td>
                  </tr>
              `)
            }
          } else if(sales_type == 1){
            $('#thead').append('Year')
          
            for(var i=0;i<data.yearsNows.length;i++)
            {
            console.log(data.yearsNows[i].year)
              $('#tbody').append(`
                  <tr>
                    <td>${data.yearsNows[i].year}</td>
                    <td>
                    </td>
                    <td></td>
                    <td> </td>
                    <td>₱${(data.yearsNows[i].revenue).toFixed(2)}</td>
                    <td> </td>
                  </tr>
              `)
            }
          }
          REPORTS(report_type)
        })
      }
    })
  script.
    $(document).ready(function(){
    })

    //- function REPORTS(){
      //- var wb = XLSX.utils.table_to_book($('#datatables')[0], {sheet:"Sheet JS"});
      //- var wbout = XLSX.write(wb, {bookType:'xlsx', bookSST:true, type: 'binary'});
      //- function s2ab(s) {
      //-   var buf = new ArrayBuffer(s.length);
      //-   var view = new Uint8Array(buf);
      //-   for (var i=0; i<s.length; i++) view[i] = s.charCodeAt(i) & 0xFF;
      //-   return buf;
      //- }
      //- $("#button-a").click(function(){
      //-   saveAs(new Blob([s2ab(wbout)],{type:"application/octet-stream"}), 'SalesReport.xlsx');
      //- });
    //- }

    function REPORTS(report_type){
      if(report_type == 0){
        var report_type = 'TOTAL'
      } else if(report_type == 1){
        var report_type = 'Loyalty'
      } else if(report_type == 2){
        var report_type = 'GiftCertificate'
      } else if(report_type == 3){
        var report_type = 'Amenity'
      } else if(report_type == 4){
        var report_type = 'Reservation'
      }
      var wb = XLSX.utils.table_to_book($('#datatables')[0], {sheet:"Sheet JS"});
      var wbout = XLSX.write(wb, {bookType:'xlsx', bookSST:true, type: 'binary'});
      function s2ab(s) {
        var buf = new ArrayBuffer(s.length);
        var view = new Uint8Array(buf);
        for (var i=0; i<s.length; i++) view[i] = s.charCodeAt(i) & 0xFF;
        return buf;
      }
      $("#button-a").click(function(){
        saveAs(new Blob([s2ab(wbout)],{type:"application/octet-stream"}), `${report_type}`+'SalesReport.xlsx');
      });
    }
    //- })