doctype html
html(lang='en')
  head
    meta(charset='utf-8')
    link(rel='apple-touch-icon', sizes='76x76', href='../paperDashboardPro/img/apple-icon.png')
    link(rel='icon', type='image/png', sizes='96x96', href=`/upload/${reqSession.utilities[0].company_logo}`)
    meta(http-equiv='X-UA-Compatible', content='IE=edge,chrome=1')
    title #{reqSession.utilities[0].company_name}
   
    // Bootstrap core CSS
    link(href='/assets/paperDashboardPro/css/bootstrap.min.css', rel='stylesheet')
    // Paper Dashboard core CSS
    link(href='/assets/paperDashboardPro/css/paper-dashboard.css', rel='stylesheet')
    // CSS for Demo Purpose, don't include it in your project
    link(href='/assets/paperDashboardPro/css/demo.css', rel='stylesheet')
    // Fonts and icons
    link(href='http://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css', rel='stylesheet')
    link(href='https://fonts.googleapis.com/css?family=Muli:400,300', rel='stylesheet', type='text/css')
    link(href='/assets/paperDashboardPro/css/themify-icons.css', rel='stylesheet')
    style.
      .dropdown-menu {
        margin-left: -148px !important;
      }
  body.sidebar-mini
    .wrapper
      .sidebar(data-active-color='spa', style='color: white')
        //
          Tip 1: you can change the color of the sidebar's background using: data-background-color="white | brown"
          Tip 2: you can change the color of the active button using the data-active-color="primary | info | success | warning | danger"
        .logo
          a.simple-text.logo-mini(href='#')
          a.simple-text.logo-normal(href='./home')
            | #{reqSession.utilities[0].company_name}
        .sidebar-wrapper
          .user
            .info
              .photo
                img(src='/assets/paperDashboardPro/img/icon.jpg')
              
              a.collapsed(data-toggle='collapse', href='#collapseExample')
                span
                  | Front Desk
              .clearfix
          ul.nav
            li.active
              a(href='./home')
                i.ti-pencil
                p
                  | Registration
            li
              a(href='/fdReservation')
                i.ti-calendar
                p
                  | Reservation
            li
              a(href='./payment')
                i.ti-credit-card
                p
                  | Payment  
            li
              a(href='./therapist')
                i.ti-user
                p
                  | Therapist Attendance    
            li
              a(href='./giftcert')
                i.ti-gift
                p
                  | Gift Certification  
      .main-panel
        nav.navbar.navbar-default
          .container-fluid
            .navbar-minimize
              button#minimizeSidebar.btn.btn-fill.btn-icon
                i.ti-more-alt
            .navbar-header
              button.navbar-toggle(type='button')
                span.sr-only Toggle navigation
                span.icon-bar.bar1
                span.icon-bar.bar2
                span.icon-bar.bar3
              a.navbar-brand(href='#Dashboard')
                | Registration
              input.tap_id(onFocus)
            .collapse.navbar-collapse
              ul.nav.navbar-nav.navbar-right
                li
                  a#date-part(style="color: black")
                li
                  a#time-part(style="color: black") 
                li
                  a.logout(style="cursor: pointer; color: black") Log Out
        .content
          .container-fluid
            .row
              .col-md-12
                .card
                  .row
                    div
                      .card-content
                        center
                          h2 Registered Guests
                        button.btn.btn-info.btn-fill.btn-wd.registrationModal(type="button", style='margin-left: 20px')
                          span.btn-label
                            i.fa.fa-plus
                          |                                                 New Guest
                  #registrationModal.modal.fade(tabindex='-1', role='dialog')
                    .modal-dialog.modal-lg(role='document')
                      .modal-content
                        .modal-header
                          h3.modal-title
                            center New Guest
                          button.close(type='button', data-dismiss='modal', aria-label='Close') X
                        .modal-body
                          #wizardCard.card-wizard
                            form#wizardForm(method='', action='')
                              .card-content
                                ul.nav
                                  li
                                    a(href='#tab1', data-toggle='tab') Personal Information
                                  li
                                    a(href='#tab2', data-toggle='tab') Account Information
                                .tab-content
                                  #tab1.tab-pane
                                    .row
                                      .col-md-4
                                        .form-group
                                          p.control-label
                                              strong
                                                | Upload Customer's Picture
                                                star *
                                          input.form-control(type='file' accept='image/*' id='cust_pic' name='cust_pic')
                                    .row
                                        div#preview_picture(style='width: 50%;margin-left: 36%;margin-top: -4%;')
                                          img.card(src=`` id="viewImage" style='margin-left: -54%;margin-top: 8%;width: 31%;')
                                       
                                    br
                                    .row
                                      .col-md-4
                                        .form-group
                                          p.control-label
                                            strong
                                              | First Name
                                              star *
                                          input.form-control(type='text', name='firstname', id='firstname'  placeholder='ex: Mike')
                                      .col-md-4
                                        .form-group
                                          p.control-label
                                            strong
                                              | Middle Name
                                          input.form-control(type='text', name='middlename', id='middlename' placeholder='ex: Espinosa')
                                      .col-md-4
                                        .form-group
                                          p.control-label
                                            strong
                                              | Last Name
                                              star *
                                          input.form-control(type='text', name='lastname', id='lastname', required='true', placeholder='ex: Dela Cruz')
                                    .row
                                      .col-md-4
                                        .form-group
                                          p.control-label
                                            strong
                                              | Sex
                                              star *
                                      .col-md-4
                                        .form-group
                                          p.control-label
                                            strong
                                              | Birthday
                                              star *
                                      .col-md-3
                                        .form-group
                                          .checkbox
                                            input#vatExempt(type='checkbox')
                                            label(for='vatExempt')
                                              | VAT-exempt
                                            
                                    .row
                                      .col-md-1
                                        .form-group
                                          .radio
                                            input(type='radio', name='gender', value='Male')
                                            label(for='radio20')
                                              | Male
                                      .col-md-3
                                        .form-group
                                          .radio
                                            input(type='radio', name='gender', value='Female')
                                            label(for='radio20')
                                              | Female
                                      .col-md-4
                                        input.form-control.datepicker(type='text' name='birthday' id="calendar")
                                      .col-md-4
                                        select.selectpicker(title='Select', data-style='btn-info', data-size='7' id='person_exempt' aria-label='true', disabled='true')
                                          each vatExempt in vatExempts
                                            option(value=`${vatExempt.vat_exempt_id}`)= vatExempt.vat_exempt_desc
                                    .row.vat_id(style="display:none")
                                      .col-md-4
                                        .form-group
                                          p.control-label
                                            strong
                                              | ID No.
                                              star *
                                          input.form-control(type='text', name='vat_id_no', id='vat_id_no'  placeholder='ID No.' required='')
                                          p.appendResults
                                    .row
                                      .col-md-12
                                        .form-group
                                          p.control-label
                                            strong
                                              | Medical History
                                          input.form-control(type='textfield', name='medical_history', id="medical_history" placeholder='ex: asthma')
                                  #tab2.tab-pane
                                    .row
                                      .form-group
                                        .col-md-15
                                          .panel-info
                                            .panel-heading 
                                              .checkbox
                                                input#checkbox1(type='checkbox')
                                                label(for='checkbox1')
                                                  | Check this if the customer wants to be a Loyalty Member.
                                                br
                                                center
                                                  h4 The Loyalty Member Fee: ₱#{(reqSession.utilities[0].membership_fee).toFixed(2)}
                                    .row
                                      .col-md-7
                                        .form-group
                                          h3.control-label
                                            strong
                                              | Account Details
                                    .row
                                      .col-md-4
                                        .form-group
                                          label.control-label Username
                                          star *
                                          input.form-control(type='text', name='username', id="username" placeholder='username\
                                          ' disabled)
                                      .col-md-4
                                        .form-group
                                          label.control-label Password
                                          star *
                                          input.form-control(type='password', name='username', id="password" placeholder='password\
                                          ' disabled)
                                      .col-md-4
                                        .form-group
                                          label.control-label Re-enter Password
                                          star *
                                          input.form-control(type='password', name='username', id="password2" placeholder='confim password\
                                          ' disabled)
                                    .row
                                      .col-md-4
                                        .form-group
                                          p.control-label
                                            strong
                                              | Card ID
                                              star *
                                          input.form-control(type='text', name='card_id', id='card_id' placeholder='Card' disabled)
                                    .row
                                    br
                                    .row
                                      .col-md-7
                                        .form-group
                                          h3.control-label
                                            strong
                                              | Contact Details
                                    .row
                                      .col-md-8
                                        .form-group
                                          p.control-label
                                            strong
                                              | Address
                                              star *
                                          input.form-control(type='text', name='address', id='address' placeholder='Address' disabled)
                                      .col-md-4
                                        .form-group
                                          p.control-label
                                            strong
                                              | Contact Number
                                              star *
                                          input.form-control(type='number', name='contact_no', id="contact_no" placeholder='e.g 09xxxxxxxxxx' disabled)
                                   
                              .card-footer
                                button.btn.btn-default.btn-fill.btn-wd.btn-back.pull-left(type='button') Back
                                button.btn.btn-info.btn-fill.btn-wd.btn-next.pull-right(type='button') Next
                                button.btn.btn-info.btn-fill.btn-wd.btn-finish.pull-right.submitButton(type='button') Finish
                                .clearfix
                  .content
                    .container-fluid
                      .row
                        .col-md-12
                          p.category  
                          br
                          
                          .card
                            .card-content
                              .nav-tabs-navigation
                                .nav-tabs-wrapper
                                  ul#tabs.nav.nav-tabs(data-tabs='tabs')
                                    li.active
                                      a(href='#common', data-toggle='tab') Common
                                    li
                                      a(href='#loyalty', data-toggle='tab') Loyalty
                              #my-tab-content.tab-content
                                // COMMON TAB
                                #common.tab-pane.active
                                  .toolbar
                                  .fresh-datatables
                                    table#datatablesCommon.table.table-no-bordered.table-hover(cellspacing='0', width='100%', style='width:100%')
                                      thead
                                        tr
                                          th Name
                                          th Sex
                                          th.disabled-sorting Actions
                                      tfoot
                                        tr
                                          th Name
                                          th Sex
                                          th Actions
                                      tbody
                                        each customer in customers
                                          if(customer.cust_type==0)
                                            tr
                                              td
                                                a.viewDetails(style='color: black; cursor: pointer' rel='tooltip' title='Click to view details' customer_id=`${customer.cust_id}`)= customer.cust_fname+" "+customer.cust_mname+" "+customer.cust_lname
                                              input.name(type='hidden' value=`${customer.cust_fname+" "+customer.cust_mname+" "+customer.cust_lname}` id=`${customer.cust_id}`)
                                              -if(customer.vat_exempt_id_no == null)
                                                input.vat_exempt_custHidden(type='hidden' value='0' id=`${customer.cust_id}`)
                                              -else if(customer.vat_exempt_id_no != null)
                                                input.vat_exempt_custHidden(type='hidden' value='1' id=`${customer.cust_id}`)
                                              
                                              td= customer.cust_gender
                                              td
                                                .dropdown(style="right: 10px")
                                                  button.btn.btn-simple.btn-info.btn-rotate(href='#', data-toggle='dropdown' style='left: auto; right: 5px')
                                                    i.ti-settings
                                                  ul.dropdown-menu
                                                    li
                                                      button.btn.btn-simple.btn-info.reserveButton(data-toggle='modal',  value=`${customer.cust_id}` style="margin-right: 15px")
                                                        span.btn-label
                                                        i.ti-calendar
                                                        |  New Reservation
                                                    li
                                                      button.btn.btn-simple.btn-info.amenityButton(data-toggle='modal' value=`${customer.cust_id}` style="margin-right: 15px")
                                                        span.btn-label
                                                        i.fa.fa-bed
                                                        |  Amenities Only
                                                    li
                                                      button.btn.btn-simple.btn-info.loyaltyRegistrationButton(data-toggle='modal' value=`${customer.cust_id}` style="margin-right: 15px")
                                                        span.btn-label
                                                        i.ti-notepad
                                                        | Loyalty  Membership
                                                    li
                                                      button.btn.btn-simple.btn-warning.updateButton(data-toggle='modal' value=`${customer.cust_id}` style="margin-right: 15px")
                                                        span.btn-label
                                                        i.ti-pencil-alt
                                                        |  Update
                                                    li
                                                      button.btn.btn-simple.btn-danger.buttonDelete(data-toggle='modal' stlye="margin-right: 15px" value=`${customer.cust_id}`)
                                                        span.btn-label
                                                        i.ti-trash
                                                        |  Delete
                                // LOYALTY TAB
                                #loyalty.tab-pane
                                  .toolbar
                                  .fresh-datatables
                                    table#datatablesLoyalty.table.table-no-bordered.table-hover(cellspacing='0', width='100%', style='width:100%')
                                      thead
                                        tr
                                          th Name
                                          th Sex
                                          th.disabled-sorting Actions
                                      tfoot
                                        tr
                                          th Name
                                          th Sex
                                          th Actions
                                      tbody
                                        each customer in customers
                                          if(customer.cust_type==1)
                                            tr
                                              td
                                                a.viewLoyaltyDetails(style='color: black; cursor: pointer' rel='tooltip' title='Click to view details' customer_id=`${customer.cust_id}`)= customer.cust_fname+" "+customer.cust_mname+" "+customer.cust_lname
                                              input.name(type='hidden' value=`${customer.cust_fname+" "+customer.cust_mname+" "+customer.cust_lname}` id=`${customer.cust_id}`)
                                              td= customer.cust_gender
                                              td
                                                .dropdown(style="right: 20px")
                                                  button.btn.btn-simple.btn-info.btn-rotate(href='#', data-toggle='dropdown' style='left: auto; right: 13px')
                                                    i.ti-settings
                                                  ul.dropdown-menu
                                                    li
                                                      //- a.btn.btn-simple.btn-info.reserveButton(href=`selectDate/${customer.cust_id}` stlye="margin-right: 15px")
                                                      button.btn.btn-simple.btn-info.reserveButton(data-toggle='modal',  value=`${customer.cust_id}` stlye="margin-right: 13px")
                                                        span.btn-label
                                                        i.ti-calendar
                                                        |  New Reservation
                                                    li
                                                      button.btn.btn-simple.btn-info.amenityButton(data-toggle='modal' value=`${customer.cust_id}` stlye="margin-right: 13px")
                                                        span.btn-label
                                                        i.fa.fa-bed
                                                        |  Amenities Only
                                                    li
                                                      button.btn.btn-simple.btn-warning.updateLoyaltyButton(data-toggle='modal' value=`${customer.cust_id}` stlye="margin-right: 13px")
                                                        span.btn-label
                                                        i.ti-pencil-alt
                                                        |  Update
                                                    li
                                                      button.btn.btn-simple.btn-danger.buttonDelete(data-toggle='modal' stlye="margin-right: 15px" value=`${customer.cust_id}`)
                                                        span.btn-label
                                                        i.ti-trash
                                                        |  Delete

                            


                  #ReservationModal.modal.fade(tabindex='-1', role='dialog')
                    .modal-dialog(role='document')
                      .modal-content
                        .modal-header
                          h3.modal-title
                            center New Reservation
                              p#hello(style='font-size: 20px')
                          button.close(type='button', data-dismiss='modal', aria-label='Close')
                        .modal-body.text-center
                          .row
                            .col-md-2
                              .form-group
                                .radio
                                  input(type='radio', name='nog', value='single' checked)
                                  label(for='radio20')
                                    | Single
                          .row
                            .col-md-2
                              .form-group
                                .radio
                                  input(type='radio', name='nog', value='multiple')
                                  label(for='radio20')
                                    | Multiple 
                          .row#Multiple(style='display:none')
                            .col-md-4  
                              .input-group
                                span.input-group-btn
                                  button.btn.btn-info.btn-numberMale.buttonMinus(type='button', disabled='disabled', data-type='minus', data-field='quantMale' id="add" )
                                    span.ti-minus
                                input.form-control.input-number.male(type='text', id="quantity" name='quantMale', value="0" min='0', max='6' disabled)
                                span.input-group-btn
                                  button.btn.btn-info.btn-numberMale.buttonAdd(type='button', data-type='plus', data-field='quantMale', disabled id="add")
                                    span.ti-plus
                              span.help-block Male
                            .col-md-4  
                              .input-group
                                span.input-group-btn
                                  button.btn.btn-info.btn-number.buttonMinus(type='button', disabled='disabled', data-type='minus', data-field='quantFemale' id="add")
                                    span.ti-minus
                                input.form-control.input-number.female(type='text', id="quantityFemale" name='quantFemale', value="0" min='0', max='6' disabled)
                                span.input-group-btn
                                  button.btn.btn-info.btn-number.buttonAdd(type='button', data-type='plus', data-field='quantFemale', disabled id="add")
                                    span.ti-plus
                              span.help-block Female
                        .modal-footer#reservationFooter
                          //- button.btn.btn-secondary.pull-right.btn.btn-info.btn-fill.btn-wd(type='button' id="book" href=`selectDate/${customer.cust_id}`) Book Reservation
                          //- button.btn.btn-secondary.pull-left.btn.btn-danger.btn-fill.btn-wd(type='button', data-dismiss='modal') Cancel
        
                  //AMENITY ONLY
                  #amenityOnly.modal.fade(tabindex='-1', role='dialog', aria-labelledby='exampleModalLabel', aria-hidden='true')
                    .modal-dialog(role='document')
                        .modal-content
                          .modal-header
                            button.close(type='button', data-dismiss='modal', aria-label='Close')
                              span(aria-hidden='true') ×
                            center
                              h4 Amenities Only
                              p.modal-title#custName
                          .modal-body
                            .row
                              .col-md-15
                                .panel-info
                                  .panel-heading 
                                    center The Entrance Fee is ₱#{reqSession.utilities[0].entrance_fee}.00

                            .row
                              center
                                h5 Specify number of guests.
                                .col-md-4 
                                .col-md-4
                                  .input-group
                                    span.input-group-btn
                                      button.btn.btn-info.btn-number.buttonMinus(type='button',  data-type='minus', data-field='quantGuest' )
                                        span.ti-minus
                                    input.form-control.input-number.quantityGuest(type='text', id="quantityGuest" name='quantGuest', value="0" min='0', max='6' disabled)
                                    span.input-group-btn
                                      button.btn.btn-info.btn-number.buttonAdd(type='button', data-type='plus', data-field='quantGuest' )
                                        span.ti-plus
                          .modal-footer
                            button.btn.btn-secondary.btn.btn-danger.btn-fill.btn-wd.pull-left(data-dismiss='modal') Close
                            button.btn.btn-secondary.btn.btn-info.btn-fill.btn-wd.pull-right.proceedButton(type='button') Proceed


                  //VIEW COMMON CUSTOMER DETAILS
                  #viewCustomerDetails.modal.fade(tabindex='-1', role='dialog', aria-labelledby='exampleModalLabel', aria-hidden='true')
                    .modal-dialog(role='document')
                      .modal-content
                        .modal-header
                          button.close(type='button', data-dismiss='modal', aria-label='Close')
                            span(aria-hidden='true') ×
                          center
                            h4.modal-title#titleName
                        .modal-body#Details
                        .modal-footer#footerAppend
                          center
                            button.btn.btn-secondary.btn.btn-info.btn-fill.btn-wd(data-dismiss='modal') Close
                  //VIEW LOYALTY CUSTOMER DETAILS
                  #viewCustomerLoyaltyDetails.modal.fade(tabindex='-1', role='dialog', aria-labelledby='exampleModalLabel', aria-hidden='true')
                    .modal-dialog(role='document')
                      .modal-content
                        .modal-header
                          button.close(type='button', data-dismiss='modal', aria-label='Close')
                            span(aria-hidden='true') ×
                          center
                            h4.modal-title#titleLoyaltyName
                        .modal-body#LoyaltyDetails
                        .modal-footer#footerAppend
                          center
                            button.btn.btn-secondary.btn.btn-info.btn-fill.btn-wd(data-dismiss='modal') Close
        
                // Registration For Loyalty
                #registerLoyalty.modal.fade(tabindex='-1', role='dialog', aria-labelledby='exampleModalLabel', aria-hidden='true')
                  .modal-dialog(role='document')
                    .modal-content
                      .modal-header
                        button.close(type='button', data-dismiss='modal', aria-label='Close')
                          span(aria-hidden='true') ×
                        center
                          h4.modal-title#titleCustomerName
                      .modal-body
                        .row
                          .col-md-15
                            .panel-info
                              .panel-heading 
                                p The Perks of being loyalty member is you can earn points and use it as payment and you can have own account to monitor your Points, Reservations etc.
                        br
                        .row
                          .col-md-6
                            .form-group
                              label.control-label Username
                              star *
                              .input-group
                                .input-group-addon 
                                  i.fa.fa-user
                                input.form-control(type='text', name='username', id="usernameReg" placeholder='username')
                              .category#ValidUsername
                        .row
                          .col-md-5
                            .form-group
                              label.control-label Password
                              star *
                              .input-group
                                .input-group-addon 
                                  i.fa.fa-key
                                input.form-control(type='password', name='username', id="password1" placeholder='password')
                              .category#ValidLength
                          .col-md-5
                            .form-group
                              label.control-label Re-enter Password
                              star *
                              input.form-control(type='password', name='username', id="password3" placeholder='confim password' disabled)
                            .category#ValidPass
                        .row
                        .row
                          .col-md-5
                            .form-group
                              h4 Fee: 
                                a ₱#{reqSession.utilities[0].membership_fee}
                      .modal-footer
                        button.btn.btn-secondary.btn.btn-info.btn-fill.btn-wd.pull-right.buttonRegisterSubmit(type='button') Submit
                        button.btn.btn-secondary.btn.btn-danger.btn-fill.btn-wd.pull-left(type='button') Cancel

                // PAYNOW LOYALTY
                #payment.modal.fade(tabindex='-1', role='dialog' aria-labelledby='myModalLabel')
                  .modal-dialog(role='document')
                    .modal-content
                      .modal-header
                        h5.modal-title
                          center Summary
                        button.close(type='button', data-dismiss='modal', aria-label='Close')
                      .modal-body
                        .row
                          .col-md-5
                            h4
                              strong Name: 
                                a#customerName
                        hr
                        .row
                          .col-md-10
                            p Registration for Loyalty Membership
                        .row
                          .col-md-4
                          .col-md-6
                            h3
                              strong#TotalPrice
                              input.totalPrice(type='hidden' value='')

                        hr
                        .row
                          .col-md-5
                            .form-group.has-default.bmd-form-group
                              label Amount Received:
                              .input-group
                                span.input-group-addon ₱  
                                input.form-control.amountReceived(type='number', placeholder='Amount Received' data-mask='000.000.000.000.000,00' data-mask-reverse="true")
                                span.input-group-addon .00
                          
                          .col-md-5
                            .form-group.has-default.bmd-form-group
                              label Change: 
                              .input-group
                                span.input-group-addon ₱ 
                                input.form-control.change(type='number', placeholder='Change' value='0' disabled)
                                span.input-group-addon .00
                        .modal-footer
                          button.btn.btn-secondary.pull-right.btn.btn-success.btn-fill.btn-wd.buttonDone(type='button') Done
                          button.btn.btn-secondary.pull-left.btn.btn-danger.btn-fill.btn-wd(type='button', data-dismiss='modal') Cancel

                // PAYNOW AMENITY
                #paynowAmenity.modal.fade(tabindex='-1', role='dialog' aria-labelledby='myModalLabel')
                  .modal-dialog(role='document')
                    .modal-content
                      .modal-header
                        h5.modal-title
                          center Summary
                        button.close(type='button', data-dismiss='modal', aria-label='Close')
                      .modal-body
                        .row
                          .col-md-10
                            h4
                              strong Name: 
                                a#Name
                        .row
                          .col-md-10
                            a(style='color: black')#cust_type
                        hr
                        .row
                          .col-md-15
                            .panel-info
                              .panel-heading 
                                center Privelage to use all amenity.
                        .row
                          .col-md-10
                            h4 Total Guest: 
                                strong#numberOfGuest 
                                a#EntranceFee
                        .row
                          .col-md-3
                          .col-md-7
                            h3
                              strong#TotalAmenityPrice
                              br
                              strong#TotalAmenityPriceVat
                              input.totalAmenityPrice(type='hidden' value='')

                        hr
                        .row
                          .col-md-5
                            .form-group.has-default.bmd-form-group
                              label Amount Received:
                              .input-group
                                span.input-group-addon ₱  
                                input.form-control.amountAmenityReceived(type='number', placeholder='Amount Received' data-mask='000.000.000.000.000,00' data-mask-reverse="true")
                          
                          .col-md-5
                            .form-group.has-default.bmd-form-group
                              label Change: 
                              .input-group
                                span.input-group-addon ₱ 
                                input.form-control.changeAmenity(type='number', placeholder='Change' value='0.00' disabled)
                        .modal-footer
                          button.btn.btn-secondary.pull-right.btn.btn-success.btn-fill.btn-wd.buttonAmenityDone(type='button') Done
                          button.btn.btn-secondary.pull-left.btn.btn-danger.btn-fill.btn-wd(type='button', data-dismiss='modal') Cancel
            
        footer.footer
          .container-fluid
            .copyright.pull-right
              | © 
              script.
                document.write(new Date().getFullYear())
              | , made with 
              i.fa.fa-heart.heart
              |  by 
              a(href='#') TEAM MBAY
  .fixed-plugin
  // Core JS Files. Extra: TouchPunch for touch library inside jquery-ui.min.js
  script(src='/assets/paperDashboardPro/js/jquery-3.1.1.min.js', type='text/javascript')
  script(src='/assets/paperDashboardPro/js/jquery-ui.min.js', type='text/javascript')
  script(src='/assets/paperDashboardPro/js/perfect-scrollbar.min.js', type='text/javascript')
  script(src='/assets/paperDashboardPro/js/bootstrap.min.js', type='text/javascript')
  // Forms Validations Plugin
  script(src='/assets/paperDashboardPro/js/jquery.validate.min.js')
  // Promise Library for SweetAlert2 working on IE
  script(src='/assets/paperDashboardPro/js/es6-promise-auto.min.js')
  // Plugin for Date Time Picker and Full Calendar Plugin
  script(src='/assets/paperDashboardPro/js/moment.min.js')
  // Date Time Picker Plugin is included in this js file
  script(src='/assets/paperDashboardPro/js/bootstrap-datetimepicker.js')
  // Select Picker Plugin
  script(src='/assets/paperDashboardPro/js/bootstrap-selectpicker.js')
  // Switch and Tags Input Plugins
  script(src='/assets/paperDashboardPro/js/bootstrap-switch-tags.js')
  // Circle Percentage-chart
  script(src='/assets/paperDashboardPro/js/jquery.easypiechart.min.js')
  // Charts Plugin
  script(src='/assets/paperDashboardPro/js/chartist.min.js')
  // Notifications Plugin
  script(src='/assets/paperDashboardPro/js/bootstrap-notify.js')
  // Sweet Alert 2 plugin
  script(src='/assets/paperDashboardPro/js/sweetalert.js')
  // Wizard Plugin
  script(src='/assets/paperDashboardPro/js/jquery.bootstrap.wizard.min.js')
  // Bootstrap Table Plugin
  script(src='/assets/paperDashboardPro/js/bootstrap-table.js')
  // Plugin for DataTables.net
  script(src='/assets/paperDashboardPro/js/jquery.datatables.js')
  // Full Calendar Plugin
  script(src='/assets/paperDashboardPro/js/fullcalendar.min.js')
  // Paper Dashboard PRO Core javascript and methods for Demo purpose
  script(src='/assets/paperDashboardPro/js/paper-dashboard.js')
  // Sharrre Library
  script(src='/assets/paperDashboardPro/js/jquery.sharrre.js')
  // Paper Dashboard PRO DEMO methods, don't include it in your project!
  script(src='/assets/paperDashboardPro/js/demo.js')
  script(src='/assets/pdfmake/pdfmake.js')
  script(src='/assets/pdfmake/vfs_fonts.js')
  script(src='/assets/webcam/webcam.min.js')
  script.
    $(document).ready(function(){
      $('.tap_id').focus()
      $('.tap_id').css('color','white').css('opacity','0')

      $('.tap_id').on('change',function(){
         $.post('./tap',{
           card_id: this.value
         }).done(data=>{
           if(data.alertDesc == 0){
             $('.tap_id').val('')
             swal({
               title: 'ERROR',
               text: 'Please try again or do manual reservation',
               icon: 'error'
             }).then(function(){
               $('.tap_id').focus()
             })
           } else if(data.alertDesc == 1){
              $('.tap_id').val('')
              $('.tap_id').focus()
              swal({
                title: data.out[0].cust_fname+' '+data.out[0].cust_mname+' '+data.out[0].cust_lname,
                text: 'Points: '+(data.out[0].member_points).toFixed(2),
                buttons: {
                  cancel: true,
                  amenity: {
                    text: 'Amenity Only',
                    value: 0,
                  },
                  reservation: {
                    text: 'New Reservation',
                    value: 1
                  }
                }
    
              }).then(function(value){
                var id = data.out[0].cust_id
                var name = data.out[0].cust_fname+' '+data.out[0].cust_mname+' '+data.out[0].cust_lname
                var exempt_cust = data.out[0].vat_exempt_id
                if(exempt_cust == null){
                  exempt_cust = 0
                } else {
                  exempt_cust = 1
                }
                $('.tap_id').focus()

                if(value == 0){
                  amenityModal(id,name,exempt_cust)

                } else if(value ==1){
                

                  reserveModal(id,name)
                }
              })
              var scriptSession = !{JSON.stringify(reqSession)};
              var image = data.out[0].cust_pic
              $('.swal-text').append(`
              <div style='width: 50%'>
              <img class="card" src="/customerPicture/${image}" id="" style="margin-left:25px; width: 15em;" />
              </div>`)
           }
         })
      })


      function amenityModal(id,name,exempt_cust){
        $('#amenityOnly').modal('show')
        $('#custName').append(`${name}`)
        // PROCEED
        $('.proceedButton').click(function(){
          var guest_quantity = $('.quantityGuest').val()
          var scriptSession = !{JSON.stringify(reqSession)};
          var vat = parseFloat(scriptSession.utilities[0].vat) / 100
          console.log('VAT',vat)
          var entrance_fee = scriptSession.utilities[0].entrance_fee
              entrance_fee_total = parseInt(guest_quantity) * parseFloat(entrance_fee)
          var entrance_fee_vat = parseFloat(entrance_fee_total) * vat
              entrance_fee_vat = parseFloat(entrance_fee_total) - parseFloat(entrance_fee_vat)
          if(guest_quantity != 0){
          swal({
            title: guest_quantity+' Guest?',
            text: ' Are you sure?',
            icon: 'info',
            buttons: ['No','Yes'],
          }).then(function(Yes){
            if(Yes){
                  $('#paynowAmenity').modal('show')
                  $('#Name').append(`${name}`)
                  $('#numberOfGuest').append(`${guest_quantity} x `)
                  $('#EntranceFee').append(`₱${parseFloat(entrance_fee).toFixed(2)}`)
                  if(exempt_cust == 0){
                    $('.totalAmenityPrice').val(entrance_fee_total)
                    $('#TotalAmenityPrice').append(`Total Price: ₱${(entrance_fee_total).toFixed(2)}`)
                  } else {
                    $('#cust_type').append('This customer is VAT exempted')
                    $('#TotalAmenityPrice').append(`Total Price: ₱${(entrance_fee_vat).toFixed(2)}`)
                    $('.totalAmenityPrice').val(entrance_fee_vat)
                    $('#TotalAmenityPriceVat').append(`Original Price: ₱${(entrance_fee_total).toFixed(2)}`)
                  }
                  // BUTTON AMENITY DONE
                  $('.buttonAmenityDone').click(function(){
                    var amount_received = $('.amountAmenityReceived').val()
                    var total_price = $('.totalAmenityPrice').val()
                    if(amount_received == 0){
                      swal({
                        title: "Amount received is 0.",
                        icon: 'warning'
                      })
                    }
                    else if(parseFloat(amount_received) < parseFloat(total_price)){
                      swal({
                        title: "The amount received is insuficient.",
                        icon: 'warning'
                      })
                    }
                    else if(parseFloat(amount_received) >= parseFloat(total_price)){
                      swal({
                        title: "Are you sure?",
                        icon: 'warning',
                        buttons: ['Cancel','Confirm']
                      }).then(function(sure){
                        if(sure){
                          $.post('./AmenityPayNow',{
                            cust_id: id,
                            guest_quantity,
                            entrance_fee_total: $('.totalAmenityPrice').val()
                          }).done(function(data){
                            if(data.alertDesc==0){
                              PDF(exempt_cust,name,guest_quantity,entrance_fee_total,entrance_fee_vat)
                              swal({
                                title: "Success",
                                icon: 'success'
                              }).then(function(){
                                location.reload();
                              })
                            }
                            else{
                              swal({
                                title: "ERROR",
                                icon: 'error'
                              })
                            }
                          })
                        } else {
                        }
                      })
                    }
                  })
            }
          })
          $('#paynowAmenity').on('hidden.bs.modal', function (){
            $('#cust_type').empty()
            $('#Name').empty()
            $('#numberOfGuest').empty()
            $('#EntranceFee').empty()
            $('#TotalAmenityPrice').empty()
            $('#TotalAmenityPriceVat').empty()
            $('.tap_id').focus()
          })
          }
        })
        $('#amenityOnly').on('hidden.bs.modal', function (){
          $('.tap_id').focus()
          $('#custName').empty()       
        });

        function PDF(exempt_cust,name,guest_quantity,entrance_fee_total,entrance_fee_vat){
        var scriptSession = !{JSON.stringify(reqSession)};
        var company_name = scriptSession.utilities[0].company_name
        var company_address = scriptSession.utilities[0].company_address
        var or_no = scriptSession.utilities[0].official_receipt_num
        var entrance = scriptSession.utilities[0].entrance_fee
        var vat = scriptSession.utilities[0].vat / 100
        var amountReceived = $('.amountAmenityReceived').val()
        var date_time = moment(new Date()).format('MMMM DD, YYYY')
        if(exempt_cust == 0){
          var total_price = (entrance_fee_total).toFixed(2)
          var vatable_sales = parseFloat(total_price) * vat
              vatable_sales = total_price - vatable_sales
          var vat_amount = total_price - vatable_sales
        } else {
          var total_price = (entrance_fee_vat).toFixed(2)
           var vatable_sales = parseFloat(total_price) * vat
              vatable_sales = total_price - vatable_sales
          var vat_amount = total_price - vatable_sales
          var vatable = {text: 'Original Price: ₱'+(entrance_fee_total).toFixed(2), fontSize: 13, bold: true}
        }
        var docDefinition = {
            content: [
                {text: company_name, fontSize: 20, bold: true, alignment: 'center'},
                {text: company_address, fontSize: 14, bold: false,alignment: 'center'},
                {text: '- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - ', fontSize: 14, bold: false, margin: [0, 0, 0, 0]},
                {text: 'Official Receipt No: '+or_no, fontSize: 12, bold: false,},
                {text: 'Date: '+date_time, fontSize: 12, bold: false,},
                {text: 'Customer '+name, fontSize: 12, bold: false,},
                {text: '- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - ', fontSize: 14, bold: false, margin: [0, 0, 0, 0]},
                {text: 'Amenity Only', fontSize:15, bold: true},
                {text: 'Entrance fee: ₱'+parseFloat(entrance).toFixed(2), fontSize:12, bold:false},
                {text: 'Total Guest: '+guest_quantity, fontSize:12, bold:false},
                
                {text: '- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - ', fontSize: 14, bold: false, margin: [0, 0, 0, 0]},
                {text: 'Amount Due: ₱'+total_price, fontSize: 17, bold: true},
                {text: 'Cash Received: ₱'+parseFloat(amountReceived).toFixed(2), fontSize: 12, bold: false},
                {text: 'Change: ₱'+$('.changeAmenity').val(), fontSize: 12, bold: false},
                vatable,
                {text: 'Vatable Sales: ₱'+(vatable_sales).toFixed(2), fontSize: 12, bold: false},
                {text: 'VAT amount'+'('+eval(vat*100)+'%): ₱'+(vat_amount).toFixed(2), fontSize: 12, bold: false},
            ],

              styles: {
              header: {
                fontSize: 18,
                bold: true,
                margin: [0, 0, 0, 10]
              },
              subheader: {
                fontSize: 16,
                bold: true,
                margin: [0, 10, 0, 5]
              },
              tableExample: {
                margin: [0, 5, 0, 15]
              },
              tableHeader: {
                bold: true,
                fontSize: 13,
                color: 'black'
              }
              }
            };
            pdfMake.createPdf(docDefinition).open(); 
    }
      }


      function reserveModal(id,name){
            $('#hello').append(`(${name})`)
            $('#ReservationModal').on('hidden.bs.modal', function (){
              $('#hello').empty()
              $('.tap_id').focus()
            });
            $('#ReservationModal').modal('show')
            $('input[type="radio"]').click(function(e){
            if(e.target.checked)
            {
            $('#reservationFooter').empty()
              if($(this).val() == "single")
              {
                $('#Multiple').css('display','none')
                $('#reservationFooter').empty()
              //-  alert("single")
                $('.buttonAdd').attr('disabled', true)
                //- $('#reservationFooter').append(`
                //- <a class="btn btn-secondary btn-info btn-fill" href="selectDate?id=${id}&reservetype=single" stlye="margin-right: 15px">Next</a>
                //- <button class="btn btn-secondary pull-left btn btn-danger btn-fill btn-wd" type="button" data-dismiss="modal">Cancel</button>`)
              }
              else if($(this).val()=="multiple")
              {
                $('#Multiple').css('display','block')
                $('button[id="add"]').click(function(){
                $('#reservationFooter').empty()
                var male=$('.male[name="quantMale"]').val()
                var female=$('.female[name="quantFemale"]').val()
                total = parseInt(male) + parseInt(female)
                $('#reservationFooter').append(`
                <button class="btn btn-secondary btn-info btn-fill total" stlye="margin-right: 15px">Next</a>
                <button class="btn btn-secondary pull-left btn btn-danger btn-fill btn-wd" type="button" data-dismiss="modal">Cancel</button>`)
                $(document).on('click', '.total', function(){
                  $('#reservationFooter').empty()
                  var scriptSession = !{JSON.stringify(reqSession)};
                  var max_guest =  scriptSession.utilities.max_guest
                  if(total > max_guest)
                  {
                    swal({
                      title: "Not allowed.",
                      icon: 'warning'
                    }).then(function(){
                    $('#reservationFooter').append(`
                <button class="btn btn-secondary btn-info btn-fill total" stlye="margin-right: 15px">Next</a>
                <button class="btn btn-secondary pull-left btn btn-danger btn-fill btn-wd" type="button" data-dismiss="modal">Cancel</button>`)

                    })
                  }
                  else
                  {
                    swal({
                      title: "Confirmation",
                      text: male+" Male & "+female+" Female",
                      icon: "warning",
                      buttons: [true,"Confirm"]
                      }).then(function(confirm){
                        if(confirm)
                        {
                          location.href=`selectDate?id=${id}&reservetype=multiple&male=${male}&female=${female}`
                        }
                        else
                        {
                        $('.male').val('0')
                        $('.female').val('0')
                        $('#reservationFooter').append(`
                        <a class="btn btn-secondary btn-info btn-fill" href="selectDate?id=${id}&reservetype=single&male=0&female=0" stlye="margin-right: 15px">Next</a>
                        <button class="btn btn-secondary pull-left btn btn-danger btn-fill btn-wd" type="button" data-dismiss="modal">Cancel</button>`)
                        }
                      })
                  }
                
                })  
                
                })
                $('.buttonAdd').attr('disabled',false)
              }
            }
            $('#reservationFooter').append(`
            <a class="btn btn-secondary btn-info btn-fill" href="selectDate?id=${id}&reservetype=single&male=0&female=0" stlye="margin-right: 15px">Next</a>
            <button class="btn btn-secondary pull-left btn btn-danger btn-fill btn-wd" type="button" data-dismiss="modal">Cancel</button>`)
            })
            $('#reservationFooter').append(`
            <a class="btn btn-secondary btn-info btn-fill" href="selectDate?id=${id}&reservetype=single&male=0&female=0" stlye="margin-right: 15px">Next</a>
            <button class="btn btn-secondary pull-left btn btn-danger btn-fill btn-wd" type="button" data-dismiss="modal">Cancel</button>`)
            $('#ReservationModal').on('hidden.bs.modal', function (){
              $('#reservationFooter').empty()
            })
      }
    })
  script.
    $(document).ready(function(){
      $('#card_id').on('change',function(){

      })
    })
  script.
    $(document).ready(function(){
              function readURL(input) {
          if (input.files && input.files[0]) {
              var reader = new FileReader();
              
              reader.onload = function (e) {
                  $('#viewImage').attr('src', e.target.result);
              }
              
              reader.readAsDataURL(input.files[0]);
          }
          }
          $("#cust_pic").change(function(){
            readURL(this);
          });
    })
  //- script.
  //-   $(document).ready(function(){
  //-     $(".cust_pic").click(function(){
  //-     retake()
  //-     })
  //-       function retake(){
  //-         swal({
  //-           title: 'Please take a picture',  
  //-           text: ' ',
  //-           buttons: {
  //-             cancel: true,
  //-             capture: {
  //-               text: 'Capture',
  //-               value: 'capture'
  //-             }
  //-           }
  //-         }).then(function(value){
  //-           if(value == 'capture'){
  //-             take_snapshot()
  //-           } else if(value == null){

  //-           }

  //-         })

  //-         $('.swal-text').append(`
  //-         <br>
  //-         <div id='my_camera'></div`)
  //-         Webcam.set({
  //-         width: 320,
  //-         height: 240,
  //-         image_format: 'jpeg',
  //-         jpeg_quality: 90
  //-         });
  //-         Webcam.attach( '#my_camera' )
  //-       }
  //-       function take_snapshot() {
  //-       // take snapshot and get image data
  //-       Webcam.snap(function(data_uri) {
  //-         swal({
  //-           text: ' ',
  //-           buttons: {
  //-             retake: {
  //-               text: 'Retake',
  //-               value: '0'
  //-             },
  //-             confirm:{
  //-               text: 'Confirm',
  //-               value: '1'
  //-             }
  //-           }
  //-         }).then(function(value){
  //-           if(value == 0){
  //-             retake()
  //-           } else if(value == 1){
  //-             //- console.log(data_uri)
  //-             //- $('#picture_value').val(data_uri)
  //-             document.getElementById('preview_picture').innerHTML = 
  //-             "<h4>Customer's Picture</h2>" + 
  //-             '<img id="cust_pic" style="width: 50%; border-radius: 3%;" src="'+data_uri+'"/>';
  //-           }

  //-         })

  //-         $('.swal-text').append(`
  //-         <div id='results'></div>`)
  //-         //- alert(data_uri)
  //-         // display results in page
  //-         document.getElementById('results').innerHTML = 
  //-           '<h2>Here is your image</h2>' + 
  //-           '<img src="'+data_uri+'"/>';
  //-       });
  //-     }
  //-   })
  script.
    $(document).ready(function(){
      //-   Webcam.set({
      //-   width: 320,
      //-   height: 240,
      //-   image_format: 'jpeg',
      //-   jpeg_quality: 90
      //- });
      //- Webcam.attach( '#my_camera' )
    })
  script.
    $(document).ready(function(){
      $('#vat_id_no').on('keyup',function(){
        var input_val = this.value
        $.post('./checkVatID',{
          input_val
        }).done(function(data){
          if(data.results == 0){
            $('.appendResults').empty()
            $('#vat_id_no').css('border-color','green')
            $('.btn-next').prop('disabled',false)
          }
          else {
            $('#vat_id_no').css('border-color','red')
            $('.appendResults').empty()
            $('.appendResults').append('<p style="color:red"> ID NO is already exist </p>')
            $('.btn-next').prop('disabled',true)
          }
        })
      })
    })
  script.
    $(document).ready(function(){
      $('.registrationModal').click(function(){
        $("#registrationModal").modal('show')
        $(document).on('change.bootstrapSwitch', '#vatExempt',function(e){
         if(e.target.checked == true){
            $('.vat_id').css('display','block')
            $('#person_exempt').attr('disabled',false)
            $('#person_exempt').selectpicker('refresh')
         } else if(e.target.checked == false) {
            $('.vat_id').css('display','none')
            $('#person_exempt').attr('disabled',true)
            $('#person_exempt').selectpicker('refresh')
         }
       })
      })
    })
  //- PASSWORD VALIDATION
  script.
    $(document).ready(function(){
      // FIRST PASSWORD
      $('#password1').on('change paste keyup', function(){
        $('#ValidLength').empty()
        if($(this).val() != 0)
        {
          $('#password3').attr('disabled',false)
        }
        else
        {
          $('#password3').attr('disabled',true)
          $('#password3').val('')
        }
        if($(this).val().length == 7 || $(this).val().length == 8 || $(this).val().length == 9)
        {
          $('#ValidLength').append('Passwords is medium')
          $('#ValidLength').css('color','orange')
        }
        else if($(this).val().length <= 7)
        {
          $('#ValidLength').append('Passwords is too short')
          $('#ValidLength').css('color','red')
          $('#password3').attr('disabled',true)
        }
        else if($(this).val().length >= 10 )
        {
          $('#ValidLength').append('Passwords is strong')
          $('#ValidLength').css('color','green')
        }

        if($(this).val()==0)
        {
          $('#ValidLength').empty()
          $('#ValidPass').empty()
        }
      })
      // SECOND PASSWORD
      $('#password3').on('change paste keyup', function(){
          $('#ValidPass').empty()
        if($(this).val() != $('#password1').val())
        {
          $('#ValidPass').append(`Passwords is not match`)
          $('#ValidPass').css('color','red')
        }
        else if($(this).val() == $('#password1').val())
        {
          $('#ValidPass').append(`Passwords is match`)
          $('#ValidPass').css('color','green')
        }
        if($(this).val().length == 0)
        {
          $('#ValidPass').empty()
        }
      })
    })

    // USERNAME VALIDATION
    $('#usernameReg').on('change paste keyup',function(){
      $('#ValidUsername').empty()
      var username = $(this).val()
        if(username.length <= 5 )
        {
          $('#ValidUsername').append('Username is too short')
          $('#ValidUsername').css('color','red')
        }
        if (username.length == 0)
        {
          $('#ValidUsername').empty()
        }
    })

  //- REGISTRATION FOR LOYALTY
  script.
    $(document).ready(function(){
      $('.loyaltyRegistrationButton').click(function(){
        var cust_id = $(this).val()
        var cust_name = $(`.name[id='${cust_id}']`).val()
        $('#registerLoyalty').modal('show')
        $('#titleCustomerName').append(`${cust_name}`)
        $('#registerLoyalty').on('hidden.bs.modal', function (){
        $('#titleCustomerName').empty()
        });

      // SUBMIT BUTTON
      $('.buttonRegisterSubmit').click(function(){
        var password1 = $('#password1').val()
        var password3 = $('#password3').val()
        var username = $('#usernameReg').val()
        var scriptSession = !{JSON.stringify(reqSession)};
        var membership_fee = scriptSession.utilities[0].membership_fee
        var valid =  scriptSession.utilities[0].membership_validity
        var validity = moment(new Date()).format('MMMM DD, YYYY')
            validity = moment(validity).add(valid,'months').format('MMMM DD, YYYY')
            
            
        if(password1 == password3 && password1 != 0 && password3 != 0)
        {
          swal({
            title:'Are you sure?',
            icon: 'warning'
          }).then(function(submit){
            if(submit)
            {
              swal({
                title: "Pay now or pay later?",
                icon: 'info',
                buttons: ['Pay Later',"Pay Now"]
              }).then(function(PayNow){
                if(PayNow)
                {
                  console.log(cust_name)
                  $('#payment').modal('show')
                  $('#customerName').append(`${cust_name}`)
                  $('#TotalPrice').append(`Total Price: ₱${membership_fee}.00`)
                  $('.totalPrice').val(membership_fee)

                  $('.buttonDone').click(function(){
                    if($('.amountReceived').val()==0)
                    {
                      swal({
                        title: "Amount received is 0.",
                        icon: 'warning'
                      })
                    }
                    else if($('.amountReceived').val() < $('.totalPrice').val())
                    {
                      swal({
                        title: "The amount received is insuficient.",
                        icon: 'warning'
                      })
                    }
                    else if($('.amountReceived').val() >= $('.totalPrice').val())
                    {
                      swal({
                        title: "Are you sure?",
                        icon: 'info'
                      }).then(function(sure){
                        if(sure)
                        {
                          $.post('./RegisterCommonToLoyaltyPaynow',{cust_id,username,password1,validity,membership_fee}).done(function(data){
                            if(data.alertDesc==0)
                            {
                              swal({
                                title: 'Success',
                                text: cust_name+' is now a loyalty member.',
                                icon: 'success'
                              }).then(function(){
                                location.reload()
                              })
                            }
                            else if(data.alertDesc == 1)
                            {
                              swal({
                                title: 'ERROR',
                                icon: 'error'
                              })
                            }
                            else if(data.alertDesc==2)
                            {
                              swal({
                                title:'Oops',
                                text: username+' already exists.',
                                icon: 'warning'
                              })
                            }
                          })
                        }
                      })
                    }
                  })
                }
                else
                {
                  
                  swal({
                      title: "Are you sure?",
                      icon: 'info'
                    }).then(function(sure){
                      if(sure)
                      {
                        $.post('./RegisterCommonToLoyalty',{cust_id,username,password1,validity,membership_fee}).done(function(data){
                          if(data.alertDesc==0)
                          {
                            swal({
                              title: 'Success',
                              text: cust_name+' is now a loyalty member.',
                              icon: 'success'
                            }).then(function(){
                              location.reload()
                            })
                          }
                          else if(data.alertDesc == 1)
                          {
                            swal({
                              title: 'ERROR',
                              icon: 'error'
                            })
                          }
                          else if(data.alertDesc==2)
                          {
                            swal({
                              title:'Oops',
                              text: username+' already exist.',
                              icon: 'warning'
                            })
                          }
                        })
                      }
                    })
                }
              })
            }
            
          })
        }
        if(password1 == 0 && password3 ==0 && username ==0 || password1 == 0 || password3 ==0 || username ==0)
        {
          swal({
              title: 'Please double check the fields.',
              text: 'Make sure all required fields have value.', 
              icon: 'warning'
            })
        }
    })
      })
    })

  //- COMPUTATION FOR CHANGE
  script.
    $(document).ready(function(){
      $('.amountReceived').on('change paste keyup',function(){
        var totalPrice = $('.totalPrice').val()
        var input = $('.amountReceived').val()
        if($('.amountReceived').val()==0)
          {
            $('.change').val(0)
          }
        else
        {
          input -= parseFloat(totalPrice)
          $('.change').val(input)
        }
      })
    })

  //- AMENITY
  script.
    $(document).ready(function(){
      $('.amenityButton').click(function(){
        var id = $(this).val()
        var cust_name = $(`.name[id='${id}']`).val()
        $('#amenityOnly').modal('show')
        $('#custName').append(`${cust_name}`)
        var exempt_cust = $(`.vat_exempt_custHidden[id='${id}']`).val()
        // PROCEED
        $('.proceedButton').click(function(){
          var guest_quantity = $('.quantityGuest').val()
          var scriptSession = !{JSON.stringify(reqSession)};
          var vat = parseFloat(scriptSession.utilities[0].vat) / 100
          console.log('VAT',vat)
          var entrance_fee = scriptSession.utilities[0].entrance_fee
              entrance_fee_total = parseInt(guest_quantity) * parseFloat(entrance_fee)
          var entrance_fee_vat = parseFloat(entrance_fee_total) * vat
              entrance_fee_vat = parseFloat(entrance_fee_total) - parseFloat(entrance_fee_vat)
          if(guest_quantity != 0){
          swal({
            title: guest_quantity+' Guest?',
            text: ' Are you sure?',
            icon: 'info',
            buttons: ['No','Yes'],
          }).then(function(Yes){
            if(Yes){
              swal({
                title: "Pay now or pay later?",
                icon: 'info',
                buttons: {
                  payLater: {
                    text:'Cancel',
                    value:'PayLater'
                  },
                  payNow: {
                    text: 'Pay Now',
                    value: 'PayNow'
                  }
                },
              }).then(function(value){
                if(value == "PayNow"){
                  $('#paynowAmenity').modal('show')
                  $('#Name').append(`${cust_name}`)
                  $('#numberOfGuest').append(`${guest_quantity} x `)
                  $('#EntranceFee').append(`₱${parseFloat(entrance_fee).toFixed(2)}`)
                  if(exempt_cust == 0){
                    $('.totalAmenityPrice').val(entrance_fee_total)
                    $('#TotalAmenityPrice').append(`Total Price: ₱${(entrance_fee_total).toFixed(2)}`)
                  } else {
                    $('#cust_type').append('This customer is VAT exempted')
                    $('#TotalAmenityPrice').append(`Total Price: ₱${(entrance_fee_vat).toFixed(2)}`)
                    $('.totalAmenityPrice').val(entrance_fee_vat)
                    $('#TotalAmenityPriceVat').append(`Original Price: ₱${(entrance_fee_total).toFixed(2)}`)
                  }
                  // BUTTON AMENITY DONE
                  $('.buttonAmenityDone').click(function(){
                    var amount_received = $('.amountAmenityReceived').val()
                    var total_price = $('.totalAmenityPrice').val()
                    if(amount_received == 0){
                      swal({
                        title: "Amount received is 0.",
                        icon: 'warning'
                      })
                    }
                    else if(parseFloat(amount_received) < parseFloat(total_price)){
                      swal({
                        title: "The amount received is insuficient.",
                        icon: 'warning'
                      })
                    }
                    else if(parseFloat(amount_received) >= parseFloat(total_price)){
                      swal({
                        title: "Are you sure?",
                        icon: 'warning',
                        buttons: ['Cancel','Confirm']
                      }).then(function(sure){
                        if(sure){
                          $.post('./AmenityPayNow',{
                            cust_id: id,
                            guest_quantity,
                            entrance_fee_total: $('.totalAmenityPrice').val()
                          }).done(function(data){
                            if(data.alertDesc==0){
                              PDF(exempt_cust,cust_name,guest_quantity,entrance_fee_total,entrance_fee_vat)
                              swal({
                                title: "Success",
                                icon: 'success'
                              }).then(function(){
                                location.reload();
                              })
                            }
                            else{
                              swal({
                                title: "ERROR",
                                icon: 'error'
                              })
                            }
                          })
                        } else {
                        }
                      })
                    }
                  })
                }
                else if(value == 'PayLater'){
                  //- if(exempt_cust == 0){
                  //-   entrance_fee_total = entrance_fee_total
                  //- } else {
                  //-   entrance_fee_total = entrance_fee_vat
                  //- }
                  //- $.post('./AmenityPayLater',{
                  //-   cust_id: id,
                  //-   guest_quantity,
                  //-   entrance_fee_total
                  //-   }).done(function(data){
                  //-     if(data.alertDesc==0){
                  //-       swal({
                  //-         title: "Success",
                  //-         icon: 'success'
                  //-       }).then(function(){
                  //-         location.reload();
                  //-       })
                  //-     } else {
                  //-       swal({
                  //-         title: "ERROR",
                  //-         icon: 'error'
                  //-       })
                  //-     }
                  //- })
                }
              })
            } else {
            }
          })
          $('#paynowAmenity').on('hidden.bs.modal', function (){
            $('#cust_type').empty()
            $('#Name').empty()
            $('#numberOfGuest').empty()
            $('#EntranceFee').empty()
            $('#TotalAmenityPrice').empty()
            $('#TotalAmenityPriceVat').empty()
          
          })
          }
        })
        $('#amenityOnly').on('hidden.bs.modal', function (){
          $('#custName').empty()       
        });
      })

        function PDF(exempt_cust,cust_name,guest_quantity,entrance_fee_total,entrance_fee_vat){
        var scriptSession = !{JSON.stringify(reqSession)};
        var company_name = scriptSession.utilities[0].company_name
        var company_address = scriptSession.utilities[0].company_address
        var or_no = scriptSession.utilities[0].official_receipt_num
        var entrance = scriptSession.utilities[0].entrance_fee
        var vat = scriptSession.utilities[0].vat / 100
        var amountReceived = $('.amountAmenityReceived').val()
        var date_time = moment(new Date()).format('MMMM DD, YYYY')
        if(exempt_cust == 0){
          var total_price = (entrance_fee_total).toFixed(2)
          var vatable_sales = parseFloat(total_price) * vat
              vatable_sales = total_price - vatable_sales
          var vat_amount = total_price - vatable_sales
        } else {
          var total_price = (entrance_fee_vat).toFixed(2)
           var vatable_sales = parseFloat(total_price) * vat
              vatable_sales = total_price - vatable_sales
          var vat_amount = total_price - vatable_sales
          var vatable = {text: 'Original Price: ₱'+(entrance_fee_total).toFixed(2), fontSize: 13, bold: true}
        }
        var docDefinition = {
            content: [
                {text: company_name, fontSize: 20, bold: true, alignment: 'center'},
                {text: company_address, fontSize: 14, bold: false,alignment: 'center'},
                {text: '- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - ', fontSize: 14, bold: false, margin: [0, 0, 0, 0]},
                {text: 'Official Receipt No: '+or_no, fontSize: 12, bold: false,},
                {text: 'Date: '+date_time, fontSize: 12, bold: false,},
                {text: 'Customer '+cust_name, fontSize: 12, bold: false,},
                {text: '- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - ', fontSize: 14, bold: false, margin: [0, 0, 0, 0]},
                {text: 'Amenity Only', fontSize:15, bold: true},
                {text: 'Entrance fee: ₱'+parseFloat(entrance).toFixed(2), fontSize:12, bold:false},
                {text: 'Total Guest: '+guest_quantity, fontSize:12, bold:false},
                
                {text: '- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - ', fontSize: 14, bold: false, margin: [0, 0, 0, 0]},
                {text: 'Amount Due: ₱'+total_price, fontSize: 17, bold: true},
                {text: 'Cash Received: ₱'+parseFloat(amountReceived).toFixed(2), fontSize: 12, bold: false},
                {text: 'Change: ₱'+$('.changeAmenity').val(), fontSize: 12, bold: false},
                vatable,
                {text: 'Vatable Sales: ₱'+(vatable_sales).toFixed(2), fontSize: 12, bold: false},
                {text: 'VAT amount'+'('+eval(vat*100)+'%): ₱'+(vat_amount).toFixed(2), fontSize: 12, bold: false},
            ],

              styles: {
              header: {
                fontSize: 18,
                bold: true,
                margin: [0, 0, 0, 10]
              },
              subheader: {
                fontSize: 16,
                bold: true,
                margin: [0, 10, 0, 5]
              },
              tableExample: {
                margin: [0, 5, 0, 15]
              },
              tableHeader: {
                bold: true,
                fontSize: 13,
                color: 'black'
              }
              }
            };
            pdfMake.createPdf(docDefinition).open(); 
    }
    })
  
  //- COMPUTATION FOR CHANGE[AMENITY]
  script.
    $(document).ready(function(){
      $('.amountAmenityReceived').on('change paste keyup',function(){
        var totalPrice = $('.totalAmenityPrice').val()
        var input = $('.amountAmenityReceived').val()
        if($('.amountAmenityReceived').val()==0)
          {
            $('.changeAmenity').val(parseFloat(0).toFixed(2))
          }
        else
        {
          input -= parseFloat(totalPrice)
          if(input < 0){
            $('.changeAmenity').val(parseFloat(0).toFixed(2))
          } else {
            $('.changeAmenity').val((input).toFixed(2))
          }
        }
      })
    })


  //- RESERVATION 
  script.
    $(document).ready(function(){
      $('.reserveButton').click(function(){
        var id = $(this).val()
        var name = $(`.name[id='${id}']`).val()

        $('#hello').append(`(${name})`)
        $('#ReservationModal').on('hidden.bs.modal', function (){
          $('#hello').empty()
        });
        $('#ReservationModal').modal('show')
        $('input[type="radio"]').click(function(e){
        if(e.target.checked)
        {
        $('#reservationFooter').empty()
          if($(this).val() == "single")
          {
            $('#Multiple').css('display','none')
            $('#reservationFooter').empty()
          //-  alert("single")
            $('.buttonAdd').attr('disabled', true)
            //- $('#reservationFooter').append(`
            //- <a class="btn btn-secondary btn-info btn-fill" href="selectDate?id=${id}&reservetype=single" stlye="margin-right: 15px">Next</a>
            //- <button class="btn btn-secondary pull-left btn btn-danger btn-fill btn-wd" type="button" data-dismiss="modal">Cancel</button>`)
          }
          else if($(this).val()=="multiple")
          {
            $('#Multiple').css('display','block')
            $('button[id="add"]').click(function(){
            $('#reservationFooter').empty()
            var male=$('.male[name="quantMale"]').val()
            var female=$('.female[name="quantFemale"]').val()
            total = parseInt(male) + parseInt(female)
            $('#reservationFooter').append(`
            <button class="btn btn-secondary btn-info btn-fill total" stlye="margin-right: 15px">Next</a>
            <button class="btn btn-secondary pull-left btn btn-danger btn-fill btn-wd" type="button" data-dismiss="modal">Cancel</button>`)
            $(document).on('click', '.total', function(){
              $('#reservationFooter').empty()
              var scriptSession = !{JSON.stringify(reqSession)};
              var max_guest =  scriptSession.utilities.max_guest
               if(total > max_guest)
               {
                swal({
                  title: "Not allowed.",
                  icon: 'warning'
                }).then(function(){
                $('#reservationFooter').append(`
            <button class="btn btn-secondary btn-info btn-fill total" stlye="margin-right: 15px">Next</a>
            <button class="btn btn-secondary pull-left btn btn-danger btn-fill btn-wd" type="button" data-dismiss="modal">Cancel</button>`)

                })
               }
               else
               {
                swal({
                  title: "Confirmation",
                  text: male+" Male & "+female+" Female",
                  icon: "warning",
                  buttons: [true,"Confirm"]
                  }).then(function(confirm){
                    if(confirm)
                    {
                      location.href=`selectDate?id=${id}&reservetype=multiple&male=${male}&female=${female}`
                    }
                    else
                    {
                    $('.male').val('0')
                    $('.female').val('0')
                    $('#reservationFooter').append(`
                    <a class="btn btn-secondary btn-info btn-fill" href="selectDate?id=${id}&reservetype=single&male=0&female=0" stlye="margin-right: 15px">Next</a>
                    <button class="btn btn-secondary pull-left btn btn-danger btn-fill btn-wd" type="button" data-dismiss="modal">Cancel</button>`)
                    }
                  })
               }
            
            })  
            
            })
            $('.buttonAdd').attr('disabled',false)
          }
         }
        $('#reservationFooter').append(`
        <a class="btn btn-secondary btn-info btn-fill" href="selectDate?id=${id}&reservetype=single&male=0&female=0" stlye="margin-right: 15px">Next</a>
        <button class="btn btn-secondary pull-left btn btn-danger btn-fill btn-wd" type="button" data-dismiss="modal">Cancel</button>`)
        })
        $('#reservationFooter').append(`
        <a class="btn btn-secondary btn-info btn-fill" href="selectDate?id=${id}&reservetype=single&male=0&female=0" stlye="margin-right: 15px">Next</a>
        <button class="btn btn-secondary pull-left btn btn-danger btn-fill btn-wd" type="button" data-dismiss="modal">Cancel</button>`)
        $('#ReservationModal').on('hidden.bs.modal', function (){
          $('#reservationFooter').empty()
        })
      })
    })
  script.
    $(document).ready(function(){
      $('.buttonDelete').click(function(){
        var cust_id = $(this).val()
        var cust_name =$(`.name[id='${cust_id}']`).val()
        swal({
          title: "Are you sure? Do you want to delete "+cust_name,
          text: "Once deleted, you will not be able to recover this file!",
          icon: "warning",
          buttons: [true,"Yes"],
          dangerMode: true,
        })
        .then((willDelete) => {
          if(willDelete)
          {
              swal({
              title: 'Please enter the administrator password.',
              icon: "warning",
              content: "input",
              buttons: [true,"Confirm"],
              dangerMode: true,
            }).then((confirm)=>{
              if(confirm)
              {
                var admin_password = $('.swal-content__input').val()
                $.post('/frontdesk/DeleteCustomer',{admin_password,cust_id}).done(function(data){
                  if(data.alertDesc==0)// IF SUCCESS
                  {
                    swal({
                      title: 'Success',
                      text: cust_name+' is deleted',
                      icon: 'success'
                    }).then(function(){
                      location.reload()
                    })
                  }
                  else if(data.alertDesc==1)// IF NOT SUCCESS
                  {
                    swal({
                      title: 'Error',
                      text: cust_name+' is not deleted.',
                      icon: 'error'
                    })
                  }
                  else if(data.alertDesc==2)// IF INCORRECT PASSWORD
                  {
                    swal({
                      title: 'Error',
                      text: 'The administrator password is incorrect.',
                      icon: 'error'
                    })
                  }
                })
              }
            });
            $('.swal-content__input').attr('type', 'password')
          }
        })
      })
    })
  
  script.
    $(document).ready(function(){
        $('#checkbox1').on('change.bootstrapSwitch', function(e){
          if(e.target.checked==false)
          {
            $("#username").prop('disabled', true);
            $("#password").prop('disabled', true);
            $("#password2").prop('disabled', true);
            $("#address").prop('disabled', true);
            $("#contact_no").prop('disabled',true);
            $("#card_id").prop('disabled', true);
          }
          else if(e.target.checked==true)
          {
            $("#username").prop('disabled', false);
            $("#password").prop('disabled', false);
            $("#password2").prop('disabled', false);
            $("#address").prop('disabled', false);
            $("#contact_no").prop('disabled',false);
            $("#card_id").prop('disabled', false);
          }
        });
    })
  script.
    $(document).ready(function(){
      $('.logout').click(function(){
      swal({
        title: "Are you sure?",
        text: "Do you want to log out?",
        icon: "warning",
        buttons: true,
        dangerMode: true,
      })
      .then((willDelete) => {
        if (willDelete) {
          $.post('/frontdesk/logout')
          location.reload()
        } 
      });
      })


      $('.submitButton').click(function(){
        if($("#checkbox1").is(':checked')){
          var loyalty = 0
        } else {
          var loyalty = 1
        }
        var newDate= $('#calendar').val()
        var vals = newDate.split('-');
        var year = vals[2];
        var month = vals[0];
        var date = vals[1];
        var dateNow = new Date()
        var scriptSession = !{JSON.stringify(reqSession)};
        var membership_validity= scriptSession.utilities[0].membership_validity
        console.log(scriptSession)
        var membershipDate = moment().add(membership_validity,'months').format('MMMM DD, YYYY')

          if($('#vatExempt').is(':checked')){
           var vat_type_id = $('#person_exempt').val()
           var vat_id_no = $('#vat_id_no').val()
          }
          else{
            var vat_type_id = "NULL"
            var vat_id_no = ""
          }

          var formData = new FormData();
          formData.append('firstname',$('#firstname').val())
          formData.append('lastname',$('#lastname').val())
          formData.append('middlename',$('#middlename').val())
          formData.append('gender',$("input[name='gender']:checked").val())
          formData.append('medical_history',$('#medical_history').val())
          formData.append('newDate',newDate)
          formData.append('year',year)
          formData.append('month',month)
          formData.append('date',date)
          formData.append('vat_type_id',vat_type_id)
          formData.append('vat_id_no',vat_id_no)
          formData.append('cust_pic', $('#cust_pic')[0].files[0])
          formData.append('address',$('#address').val())
          formData.append('username',$('#username').val())
          formData.append('password',$('#password').val())
          formData.append('contact_no',$('#contact_no').val())
          formData.append('card_id',$('#card_id').val())
          formData.append('membershipDate',membershipDate)
          formData.append('loyalty',loyalty)
          console.log($('#cust_pic')[0].files[0])
          $.ajax({
            type:"POST",
            url: "/frontdesk/Home/newCustomer",
            data: formData,
            processData: false,
            contentType: false,
        }).done(function(data){
            if(data.alertSuccess==1)
            {
              swal({
                title:'Success', 
                text:'New guest added.', 
                icon:'success'
                }).then(function(){
                  location.reload()
              })
            }
            else 
            {
              swal({
                title:'Not Success', 
                text:'Customer already exist.', 
                icon:'warning'
                })
            }
          })
      })
    })



  script.
    $(function () {
      var date = new Date()
      var year = date.getFullYear()
      var year2 = year - "18"
      var year3 = new Date(year2, 00,01)
      $('.datepicker').datetimepicker({
        viewMode: 'years',
        format: 'MM-DD-YYYY',
        maxDate: year3,
        icons: {
          time: "fa fa-clock-o",
          date: "fa fa-calendar",
          up: "fa fa-chevron-up",
          down: "fa fa-chevron-down",
          previous: 'fa fa-chevron-left',
          next: 'fa fa-chevron-right',
          today: 'fa fa-screenshot',
          clear: 'fa fa-trash',
          close: 'fa fa-remove'
          },
          widgetPositioning:{"horizontal":"auto",
          "vertical":"auto"}
        });
    })


        
      $('.datepicker').on('dp.hide', function(event){
        setTimeout(function(){
          $('.datepicker').data('DateTimePicker').viewMode('years');
        },1);
      });
  script.
    $(document).ready(function() {
      var interval = setInterval(function() {
          var momentNow = moment();
          $('#date-part').html(momentNow.format('YYYY MMMM DD') + ' '
                              + momentNow.format('dddd')
                              .substring(0,3).toUpperCase());
          $('#time-part').html(momentNow.format('A hh:mm:ss'));
      }, 100);
      
      $('#stop-interval').on('click', function() {
          clearInterval(interval);
      });
      $('#calendar').val('')
      });


  script(type='text/javascript').
    $(document).ready(function(){
    demo.initOverviewDashboard();
    demo.initCirclePercentage();
    });
  script(type='text/javascript').
    $(document).ready(function() {
    $('#datatablesCommon').DataTable({
    "pagingType": "full_numbers",
    "lengthMenu": [[10, 25, 50, -1], [10, 25, 50, "All"]],
    responsive: true,
    language: {
    search: "_INPUT_",
    searchPlaceholder: "Search records",
    }
    });
    });
  script(type='text/javascript').
    $(document).ready(function() {
    $('#datatablesLoyalty').DataTable({
    "pagingType": "full_numbers",
    "lengthMenu": [[10, 25, 50, -1], [10, 25, 50, "All"]],
    responsive: true,
    language: {
    search: "_INPUT_",
    searchPlaceholder: "Search records",
    }
    });
    });
  script(type='text/javascript').
    $(document).ready(function(){
    demo.initWizard();
    });
  script.
    $().ready(function(){
    $('#registerFormValidation').validate();
    $('#loginFormValidation').validate();
    $('#allInputsFormValidation').validate();
        });
  script.
        //plugin bootstrap minus and plus
    //http://jsfiddle.net/laelitenetwork/puJ6G/
    $('.btn-numberMale').click(function(e){
        e.preventDefault();
        
        fieldName = $(this).attr('data-field');
        type      = $(this).attr('data-type');
        var input = $("input[name='"+fieldName+"']");
        var currentVal = parseInt(input.val());
        if (!isNaN(currentVal)) {
            if(type == 'minus') {
                
                if(currentVal > input.attr('min')) {
                    input.val(currentVal - 1).change();
                } 
                if(parseInt(input.val()) == input.attr('min')) {
                    $(this).attr('disabled', true);
                }

            } else if(type == 'plus') {

                if(currentVal < input.attr('max')) {
                    input.val(currentVal + 1).change();
                }
                if(parseInt(input.val()) == input.attr('max')) {
                    $(this).attr('disabled', true);
                }

            }
        } else {
            input.val(0);
        }
    });
    $('.input-number').focusin(function(){
      $(this).data('oldValue', $(this).val());
    });
    $('.input-number').change(function() {
        
        minValue =  parseInt($(this).attr('min'));
        maxValue =  parseInt($(this).attr('max'));
        valueCurrent = parseInt($(this).val());
        
        name = $(this).attr('name');
        if(valueCurrent >= minValue) {
            $(".btn-numberMale[data-type='minus'][data-field='"+name+"']").removeAttr('disabled')
        } else {
            //- alert('Sorry, the minimum value was reached');
            $(this).val($(this).data('oldValue'));
        }
        if(valueCurrent <= maxValue) {
            $(".btn-numberMale[data-type='plus'][data-field='"+name+"']").removeAttr('disabled')
        } else {
            //- alert('Sorry, the maximum value was reached');
            $(this).val($(this).data('oldValue'));
        }
        
            
        });
        $(".input-number").keydown(function (e) {
                // Allow: backspace, delete, tab, escape, enter and .
                if ($.inArray(e.keyCode, [46, 8, 9, 27, 13, 190]) !== -1 ||
                    // Allow: Ctrl+A
                    (e.keyCode == 65 && e.ctrlKey === true) || 
                    // Allow: home, end, left, right
                    (e.keyCode >= 35 && e.keyCode <= 39)) {
                        // let it happen, don't do anything
                        return;
                }
                // Ensure that it is a number and stop the keypress
                if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) {
                    e.preventDefault();
                }
          });
  
  
  script.
        //plugin bootstrap minus and plus
    //http://jsfiddle.net/laelitenetwork/puJ6G/
    $('.btn-number').click(function(e){
        e.preventDefault();
        
        fieldName = $(this).attr('data-field');
        type      = $(this).attr('data-type');
        var input = $("input[name='"+fieldName+"']");
        var currentVal = parseInt(input.val());
        if (!isNaN(currentVal)) {
            if(type == 'minus') {
                
                if(currentVal > input.attr('min')) {
                    input.val(currentVal - 1).change();
                } 
                if(parseInt(input.val()) == input.attr('min')) {
                    $(this).attr('disabled', true);
                }

            } else if(type == 'plus') {

                if(currentVal < input.attr('max')) {
                    input.val(currentVal + 1).change();
                }
                if(parseInt(input.val()) == input.attr('max')) {
                    $(this).attr('disabled', true);
                }

            }
        } else {
            input.val(0);
        }
    });
    $('.input-number').focusin(function(){
      $(this).data('oldValue', $(this).val());
    });
    $('.input-number').change(function() {
        
        minValue =  parseInt($(this).attr('min'));
        maxValue =  parseInt($(this).attr('max'));
        valueCurrent = parseInt($(this).val());
        
        name = $(this).attr('name');
        if(valueCurrent >= minValue) {
            $(".btn-number[data-type='minus'][data-field='"+name+"']").removeAttr('disabled')
        } else {
            //- alert('Sorry, the minimum value was reached');
            $(this).val($(this).data('oldValue'));
        }
        if(valueCurrent <= maxValue) {
            $(".btn-number[data-type='plus'][data-field='"+name+"']").removeAttr('disabled')
        } else {
            //- alert('Sorry, the maximum value was reached');
            $(this).val($(this).data('oldValue'));
        }
        
            
        });
        $(".input-number").keydown(function (e) {
                // Allow: backspace, delete, tab, escape, enter and .
                if ($.inArray(e.keyCode, [46, 8, 9, 27, 13, 190]) !== -1 ||
                    // Allow: Ctrl+A
                    (e.keyCode == 65 && e.ctrlKey === true) || 
                    // Allow: home, end, left, right
                    (e.keyCode >= 35 && e.keyCode <= 39)) {
                        // let it happen, don't do anything
                        return;
                }
                // Ensure that it is a number and stop the keypress
                if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) {
                    e.preventDefault();
                }
          });
  script.
    $(document).ready(function(){
      $('.viewDetails').click(function(){
        var customer_id = $(this).attr('customer_id')
        
        $.post('./Customer/viewCustomerDetails',{customer_id}).done(function(data){
          console.log(data)
          $('#viewCustomerDetails').modal('show')
          $('#titleName').append(`${data[0].cust_fname} ${data[0].cust_mname} ${data[0].cust_lname}`)
          
          
          var birthday =data[0].cust_birthMonth+'-'+data[0].cust_birthDate+'-'+data[0].cust_birthYear
          console.log(birthday == 'Invalid date')
          if(birthday == 'Invalid date'){
            birthday = ' '
          } else {
            birthday = birthday
          }
          //- console.log(birthday)
            birthday = moment(birthday).format('MMMM DD, YYYY')
          $('#Details').append(`
          <img class="card" src="/customerPicture/${data[0].cust_pic}" id="" style="margin-left:33%; width: 15em;" />`)
        })
      $('#viewCustomerDetails').on('hidden.bs.modal', function (){
          $('#titleName').empty(),
          $('#Details').empty()
        });
      })
    })
  script.
    $(document).ready(function(){
      $('.viewLoyaltyDetails').click(function(){
        var customer_id = $(this).attr('customer_id')
        
        $.post('./Customer/viewCustomerLoyaltyDetails',{customer_id}).done(function(data){
          console.log(data)
          $('#viewCustomerLoyaltyDetails').modal('show')
          $('#titleLoyaltyName').append(`${data[0].cust_fname} ${data[0].cust_mname} ${data[0].cust_lname}`)
          
          
          var birthday =data[0].cust_birthMonth+'-'+data[0].cust_birthDate+'-'+data[0].cust_birthYear
          console.log(birthday)
            birthday = moment(birthday).format('MMMM DD, YYYY')
          $('#LoyaltyDetails').append(`<p>Address: ${data[0].cust_address}
          <p>Birthday: ${birthday} 
          <p>Contact No: ${data[0].cust_contact_no}
          <p>Points:${data[0].member_points}
          <p>Membership Expiration: ${data[0].membership_validity}`)
        })
      $('#viewCustomerLoyaltyDetails').on('hidden.bs.modal', function (){
          $('#titleLoyaltyName').empty(),
          $('#LoyaltyDetails').empty()
        });
      })
    })